<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>YuanyaDocs</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Root</a></li><li class="chapter-item expanded "><a href="æ¨¡æ¿.html"><strong aria-hidden="true">1.</strong> æ¨¡æ¿</a></li><li class="chapter-item expanded "><a href="ç•ª.html"><strong aria-hidden="true">2.</strong> ç•ª</a></li><li class="chapter-item expanded affix "><li class="part-title">è®¡</li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> è¯­è¨€</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="è®¡/è¯­è¨€/Go.html"><strong aria-hidden="true">3.1.</strong> Go</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> äº‘åŸç”Ÿ</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="è®¡/äº‘åŸç”Ÿ/Kubernetes.html"><strong aria-hidden="true">4.1.</strong> Kuberntes</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> æ“ä½œç³»ç»Ÿ</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.</strong> Linux</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="è®¡/æ“ä½œç³»ç»Ÿ/Linux.eBPF.html"><strong aria-hidden="true">5.1.1.</strong> Linux.eBPF</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">YuanyaDocs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h3 id="hi-there-"><a class="header" href="#hi-there-">Hi there ğŸ‘‹</a></h3>
<!--
**YuanyaTianchi/yuanyatianchi** is a âœ¨ _special_ âœ¨ repository because its `README.md` (this file) appears on your GitHub profile.

Here are some ideas to get you started:

- ğŸ”­ Iâ€™m currently working on ...
- ğŸŒ± Iâ€™m currently learning ...
- ğŸ‘¯ Iâ€™m looking to collaborate on ...
- ğŸ¤” Iâ€™m looking for help with ...
- ğŸ’¬ Ask me about ...
- ğŸ“« How to reach me: ...
- ğŸ˜„ Pronouns: ...
- âš¡ Fun fact: ...
-->
<p><img src="./img/%E6%A0%88.svg" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><p>+++</p>
<p>title = &quot;Title&quot;
description = &quot;it.tag.tag.Title&quot;
tags = [&quot;it&quot;,&quot;tag&quot;,&quot;tag&quot;]</p>
<p>+++</p>
<h1 id="title"><a class="header" href="#title">Title</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="è¿½ç•ª"><a class="header" href="#è¿½ç•ª">è¿½ç•ª</a></h1>
<h2 id="2022"><a class="header" href="#2022">2022</a></h2>
<p>ã€202301ã€‘ã€æ—¥ã€‘fate/strangeFake-0</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘high card-å‘¨ä¸€0</p>
<p>ã€202211ã€‘ã€æ—¥ã€‘é˜¿å°”æ–¯çš„å·¨å…½-0</p>
<p>ã€202211ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22350.html">åˆ«å½“æ¬§å°¼é…±äº†</a>-7</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘å†°æµ·æˆ˜è®°2-0</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘å¤§é›ªæµ·çš„å‡¯çº³-0</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘ä¸œäº¬å¤ä»‡è€…</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘è¾‰å¤œå¤§å°å§æƒ³è®©æˆ‘å‘Šç™½ åˆå»ä¸ä¼šç»“æŸ-0</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘é—´è°æ•™å®¤-0</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘å°¼å°”ï¼šæœºæ¢°çºªå…ƒ-0</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘ä¸ƒå¤§ç½ª æ€¨å—Ÿçš„çˆ±ä¸å ¡ å‰ç¯‡-0</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘æªç¥</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/23092.html">æ–‡è±ªé‡çŠ¬4</a>-å‘¨ä¸‰0</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘<a href="https://www.bilibili.com/bangumi/media/md28412512">è™šæ„æ¨ç†2</a>-å‘¨æ—¥1</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘ä¼Šè—¤æ¶¦äºŒ2-0</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘<a href="https://www.bilibili.com/bangumi/media/md28412511/">å› ä¸ºå¤ªæ€•ç—›å°±å…¨ç‚¹é˜²å¾¡åŠ›äº†</a>-å‘¨ä¸‰4</p>
<p>ã€202301ã€‘ã€æ—¥ã€‘<a href="https://www.agemys.net/play/20220186">æœ€å¼ºé˜´é˜³å¸ˆçš„å¼‚ä¸–ç•Œè½¬ç”Ÿè®°</a>-å‘¨æ—¥2</p>
<p>ã€202211ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22099.html">JOJOçš„å¥‡å¦™å†’é™©6çŸ³ä¹‹æµ·Part3</a></p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22465.html"><strong>4ä¸ªäººå„è‡ªæœ‰ç€è‡ªå·±çš„ç§˜å¯†</strong></a></p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22508.html">é£™é€Ÿå®…ç”·5</a>-å‘¨ä¸€10</p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/21333.html">ç”µé”¯äºº</a></p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22203.html">å­¤ç‹¬æ‘‡æ»š</a></p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22322.html">é»„é‡‘ç¥å¨4</a>-å‘¨ä¸€0</p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22266.html">æœºåŠ¨æˆ˜å£«é«˜è¾¾ æ°´æ˜Ÿçš„é­”å¥³</a>-å‘¨æ—¥0</p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22518.html">é—´è°è¿‡å®¶å®¶ Part2</a></p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.bilibili.com/bangumi/media/md28339709">çµèƒ½ç™¾åˆ†ç™¾3</a></p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22473.html">åä¾¦æ¢æŸ¯å— çŠ¯äººçŠ¯æ³½å…ˆç”Ÿ</a>-å‘¨äºŒ0</p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22438.html"><strong>ç§‹å¶åŸå¥³ä»†æˆ˜äº‰</strong></a></p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22209.html">æ­»ç¥ åƒå¹´è¡€æˆ˜ç¯‡</a>-å‘¨äºŒ0</p>
<p>ã€202210ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22536.html">é“¶æ²³è‹±é›„ä¼ è¯´ Die Neue These ç­–è°‹</a>-å‘¨äº”0</p>
<p>ã€202209ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22524.html"><strong>èµ›åšæœ‹å…‹ï¼šè¾¹ç¼˜è¡Œè€…</strong></a></p>
<p>ã€202207ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22099.html">JOJOçš„å¥‡å¦™å†’é™©6çŸ³ä¹‹æµ·Part2</a></p>
<p>ã€202207ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22224.html">Lycoris Recoil</a></p>
<p>ã€202207ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/21285.html">Overlord4</a></p>
<p>ã€202207ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22332.html">RWBY-å†°é›ªå¸å›½</a>-å‘¨æ—¥4</p>
<p>ã€202207ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22294.html">æ¬¢è¿æ¥åˆ°å®åŠ›è‡³ä¸Šä¸»ä¹‰æ•™å®¤2</a></p>
<p>ã€202207ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22170.html">ç‹‚èµŒä¹‹æ¸ŠåŒ</a></p>
<p>ã€202207ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/20181.html"><strong>æ¥è‡ªæ·±æ¸Š2 çƒˆæ—¥çš„é»„é‡‘ä¹¡</strong></a></p>
<p>ã€202207ã€‘ã€æ—¥ã€‘<a href="https://www.agemys.net/play/20220134">å¼‚ä¸–ç•Œèˆ…èˆ…</a>-å‘¨12</p>
<p>ã€202207ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22084.html">ç§Ÿç•Œå¥³å‹2</a>-å‘¨å…­18</p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/21157.html">å¤„åˆ‘å°‘å¥³çš„ç”Ÿå­˜ä¹‹é“</a></p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/21104.html"><strong>è¾‰å¤œå¤§å°å§æƒ³è®©æˆ‘å‘Šç™½3</strong></a></p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22164.html"><strong>é—´è°è¿‡å®¶å®¶</strong></a></p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<a href="https://www.bilibili.com/bangumi/play/ss39725/">ç†ç§‘ç”Ÿå å…¥æƒ…ç½‘ï¼Œæ•…å°è¯•è¯æ˜2</a>-å‘¨å…­4</p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<a href="https://www.bilibili.com/bangumi/play/ss41418/"><strong>æ‹çˆ±è¦åœ¨å¾æœä¸–ç•Œå</strong></a></p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<a href="https://www.bilibili.com/bangumi/play/ep478912">æ‹çˆ±æ¸¸æˆä¸–ç•Œå¯¹è·¯äººè§’è‰²å¾ˆä¸å‹å¥½</a></p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22172.html">æ´¾å¯¹æµªå®¢è¯¸è‘›å­”æ˜</a></p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22165.html">æœ‹å‹æ¸¸æˆ1</a></p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22162.html"><strong>é’ä¹‹èŠ¦è‹‡</strong></a></p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<a href="https://www.yhdmp.cc/showp/22174.html">å¤æ—¥é‡ç°</a></p>
<p>ã€202201ã€‘ã€æ—¥ã€‘é¬¼ç­ä¹‹åˆƒ3æ¸¸éƒ­ç¯‡</p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<strong>è¿›å‡»çš„å·¨äººæœ€ç»ˆå­£part2</strong></p>
<p>ã€202201ã€‘ã€æ—¥ã€‘å¤©æ‰ç‹å­çš„èµ¤å­—å›½å®¶æŒ¯å…´æœ¯</p>
<p>ã€202201ã€‘ã€æ—¥ã€‘<strong>ä¸å˜æˆäº†å¼‚ä¸–ç•Œç¾å°‘å¥³çš„å¥½å‹ä¸€èµ·å†’é™©</strong></p>
<h2 id="2021"><a class="header" href="#2021">2021</a></h2>
<p>ã€202110ã€‘ã€æ—¥ã€‘jojoçš„å¥‡å¦™å†’é™©.çŸ³ä¹‹æµ·</p>
<p>ã€202110ã€‘ã€æ—¥ã€‘é“‚é‡‘ç»ˆå±€</p>
<p>ã€202110ã€‘ã€æ—¥ã€‘èŒƒé©¬åˆƒç‰™</p>
<p>ã€202110ã€‘ã€æ—¥ã€‘å›½ç‹æ’å</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘<a href="https://www.agemys.cc/detail/20210314">å¢ƒç•Œè§¦å‘è€…3</a>-0</p>
<p>ã€202110ã€‘ã€æ—¥ã€‘é­”æ³•ä½¿çš„æ–°å¨˜2-1</p>
<p>ã€202110ã€‘ã€æ—¥ã€‘ä¸ƒåŸç½ªå‰§åœºç‰ˆ è¢«å…‰è¯…å’’çš„ä¼—äºº</p>
<p>ã€202110ã€‘ã€æ—¥ã€‘<strong>æ— èŒè½¬ç”Ÿ1part2</strong></p>
<p>ã€202110ã€‘ã€æ—¥ã€‘<strong>è‹±é›„è”ç›Ÿï¼šåŒåŸä¹‹æˆ˜</strong></p>
<p>ã€202107ã€‘ã€æ—¥ã€‘è¶…é¾™ç è‹±é›„BM-17</p>
<p>ã€202107ã€‘ã€æ—¥ã€‘æ­Œå‰§å°‘å¥³-0</p>
<p>ã€202107ã€‘ã€æ—¥ã€‘<strong>å…³äºæˆ‘è½¬ç”Ÿå˜æˆå²è±å§†è¿™ä»¶äº‹3</strong></p>
<p>ã€202107ã€‘ã€æ—¥ã€‘å¯’è‰é¸£æ³£ä¹‹æ—¶ å’-0</p>
<p>ã€202107ã€‘ã€æ—¥ã€‘è§é¢5ç§’å¼€å§‹æˆ˜æ–—</p>
<p>ã€202107ã€‘ã€æ—¥ã€‘ç²¾çµå¹»æƒ³è®°</p>
<p>ã€202107ã€‘ã€æ—¥ã€‘<strong>å¹³ç¨³ä¸–ä»£çš„éŸ¦é©®å¤©ä»¬</strong></p>
<p>ã€202107ã€‘ã€æ—¥ã€‘å¥‡å·§è®¡ç¨‹è½¦</p>
<p>ã€202107ã€‘ã€æ—¥ã€‘å°æ—å®¶çš„é¾™å¥³ä»†S</p>
<p>ã€202107ã€‘ã€æ—¥ã€‘å¼‚ä¸–ç•Œè¿·å®«é»‘å¿ƒä¼ä¸š</p>
<p>ã€202104ã€‘ã€æ—¥ã€‘MARS RED-1</p>
<p>ã€202104ã€‘ã€æ—¥ã€‘MegaloBOX2</p>
<p>ã€202104ã€‘ã€æ—¥ã€‘æé“ä¸»å¤«-5</p>
<p>ã€202104ã€‘ã€æ—¥ã€‘å¦‚æœç©¶æè¿›åŒ–çš„å®Œå…¨æ²‰æµ¸RPGæ¯”ç°å®æ›´åƒåœ¾çš„è¯1</p>
<p>ã€202104ã€‘ã€æ—¥ã€‘å…¥é—´åŒå­¦å…¥é­”äº†2-0</p>
<p>ã€202104ã€‘ã€æ—¥ã€‘æˆ˜æ–—å‘˜æ´¾é£ä¸­</p>
<p>ã€202104ã€‘ã€æ—¥ã€‘è½¬ç”Ÿå²è±å§†æ—¥è®°-2</p>
<p>ã€202101ã€‘ã€å›½ã€‘<strong>åˆºå®¢ä¼å…­ä¸ƒä¹‹ç„æ­¦å›½ç¯‡</strong></p>
<p>ã€202101ã€‘ã€æ—¥ã€‘BackArrow</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘ä»é›¶å¼€å§‹çš„å¼‚ä¸–ç•Œç”Ÿæ´»2.2</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘åŠ¨ç‰©ç‹‚æƒ³æ›²2</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘å·¥ä½œç»†èƒ2</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘å·¥ä½œç»†èƒBlack</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘å¥½æ¯”æ˜¯æœ€ç»ˆè¿·å®«å‰çš„å°‘å¹´åˆ°æ–°æ‰‹æ‘ç”Ÿæ´»ä¸€èˆ¬çš„æ•…äº‹</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘<strong>å…³äºæˆ‘è½¬ç”Ÿå˜æˆå²è±å§†è¿™ä»¶äº‹2</strong></p>
<p>ã€202101ã€‘ã€æ—¥ã€‘å›å¤æœ¯å£«çš„é‡å¯äººç”Ÿ</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘è®°å½•çš„åœ°å¹³çº¿3</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘<strong>è¿›å‡»çš„å·¨äººæœ€ç»ˆå­£part1</strong></p>
<p>ã€202101ã€‘ã€æ—¥ã€‘å¢ƒç•Œè§¦å‘è€…2</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘å €ä¸å®«æ‘</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘<a href="https://www.bilibili.com/bangumi/media/md28232005">ä¸ƒå¤§ç½ª4</a>-14</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘å¼±åŠ¿è§’è‰²å‹å´å›</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘èµ›é©¬å¨˜-5</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘å¤©ç©ºä¾µçŠ¯1</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘<strong>æ— èŒè½¬ç”Ÿ1part1</strong></p>
<p>ã€202101ã€‘ã€æ—¥ã€‘æ‘‡æ›³éœ²è¥2-2</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘çº¦å®šçš„æ¢¦å¹»å²›2</p>
<p>ã€202101ã€‘ã€æ—¥ã€‘<strong>è½¬ç”Ÿæˆèœ˜è››åˆæ€æ ·</strong></p>
<h2 id="2020"><a class="header" href="#2020">2020</a></h2>
<p>ã€202010ã€‘ã€æ—¥ã€‘æˆç¥ä¹‹æ—¥</p>
<p>ã€202010ã€‘ã€æ—¥ã€‘é¬¼ç­ä¹‹åˆƒå‰§åœºç‰ˆ æ— é™åˆ—è½¦ç¯‡</p>
<p>ã€202010ã€‘ã€æ—¥ã€‘é­”å¥³ä¹‹æ—…1</p>
<p>ã€202010ã€‘ã€æ—¥ã€‘å…¨å‘˜æ¶ç‰</p>
<p>ã€202010ã€‘ã€æ—¥ã€‘*åœ¨é­”ç‹åŸè¯´æ™šå®‰</p>
<p>ã€202010ã€‘ã€æ—¥ã€‘*å’’æœ¯å›æˆ˜1</p>
<p>ã€202007ã€‘ã€å›½ã€‘é›¾å±±äº”è¡Œ1</p>
<p>ã€202007ã€‘ã€æ—¥ã€‘ä»é›¶å¼€å§‹çš„å¼‚ä¸–ç•Œç”Ÿæ´»2.1</p>
<p>ã€202007ã€‘ã€æ—¥ã€‘å¤§æ¬ºè¯ˆå¸ˆ</p>
<p>ã€202007ã€‘ã€æ—¥ã€‘åˆ€å‰‘ç¥åŸŸ3 Alicization3-12</p>
<p>ã€202007ã€‘ã€æ—¥ã€‘é«˜æ ¡ä¹‹ç¥-6</p>
<p>ã€202007ã€‘ã€æ—¥ã€‘æ²¡è½è¦å¡/DECA-DENCE</p>
<p>ã€202007ã€‘ã€æ—¥ã€‘åˆƒç‰™2</p>
<p>ã€202007ã€‘ã€æ—¥ã€‘å¤©æ™´çƒ‚æ¼«</p>
<p>ã€202007ã€‘ã€æ—¥ã€‘æˆ‘çš„é’æ˜¥æ‹çˆ±ç‰©è¯­æœç„¶æœ‰é—®é¢˜3-7</p>
<p>ã€202007ã€‘ã€æ—¥ã€‘ç‚ç‚æ¶ˆé˜²é˜Ÿ2</p>
<p>ã€202007ã€‘ã€æ—¥ã€‘ç§Ÿç•Œå¥³å‹1</p>
<p>ã€202004ã€‘ã€æ—¥ã€‘é£ŸæˆŸä¹‹çµ5è±ªä¹‹çš¿-0</p>
<p>ã€202004ã€‘ã€æ—¥ã€‘éšç’ä¹‹äº‹</p>
<p>ã€202004ã€‘ã€æ—¥ã€‘æ ¼è±æ™®å°¼å°”1</p>
<p>ã€202004ã€‘ã€æ—¥ã€‘è¾‰å¤œå¤§å°å§æƒ³è®©æˆ‘å‘Šç™½2</p>
<p>ã€202004ã€‘ã€æ—¥ã€‘è½¬ç”Ÿæˆä¸ºäº†åªæœ‰ä¹™å¥³æ¸¸æˆç ´ç­Flagçš„é‚ªæ¶å¤§å°å§</p>
<p>ã€202004ã€‘ã€æ—¥ã€‘ç¥ä¹‹å¡”1</p>
<p>ã€202004ã€‘ã€æ—¥ã€‘åŠ¨ç‰©æ–°ä¸–ä»£/BNA</p>
<p>ã€202001ã€‘ã€æ—¥ã€‘å› ä¸ºå¤ªæ€•ç—›å°±å…¨ç‚¹é˜²å¾¡åŠ›äº†</p>
<p>ã€202001ã€‘ã€æ—¥ã€‘å¼‚ç§æ—é£ä¿—å¨˜è¯„é‰´æŒ‡å—</p>
<p>ã€202001ã€‘ã€æ—¥ã€‘å¼‚åº¦å…¥ä¾µID:INVADED</p>
<p>ã€202001ã€‘ã€æ—¥ã€‘è™šæ„æ¨ç†</p>
<p>ã€202001ã€‘ã€æ—¥ã€‘é½æœ¨æ¥ é›„çš„ç¾éš¾ å§‹åŠ¨ç¯‡</p>
<p>ã€202001ã€‘ã€æ—¥ã€‘æŸç§‘å­¦çš„è¶…ç”µç£ç‚®T-15</p>
<p>ã€202001ã€‘ã€æ—¥ã€‘çŒé¾™é£èˆ¹</p>
<p>ã€202001ã€‘ã€æ—¥ã€‘ç†ç§‘ç”Ÿå å…¥æƒ…ç½‘ï¼Œæ•…å°è¯•è¯æ˜</p>
<p>ã€202001ã€‘ã€æ—¥ã€‘è¾¾å°”æ–‡æ¸¸æˆ</p>
<p>ã€202001ã€‘ã€æ—¥ã€‘<a href="https://www.agemys.cc/detail/20200054"><strong>æ¥è‡ªæ·±æ¸Š æ·±æ²‰çµé­‚çš„é»æ˜</strong></a></p>
<h2 id="2019"><a class="header" href="#2019">2019</a></h2>
<p>ã€201910ã€‘ã€æ—¥ã€‘è¿™ä¸ªå‹‡è€…æ˜æ˜è¶…å¼ºå´è¿‡åˆ†æ…é‡</p>
<p>ã€201910ã€‘ã€æ—¥ã€‘å¿ƒç†æµ‹é‡è€…3</p>
<p>ã€201910ã€‘ã€æ—¥ã€‘æˆ‘ä¸æ˜¯è¯´äº†èƒ½åŠ›è¦å¹³å‡å€¼ä¹ˆ</p>
<p>ã€201910ã€‘ã€æ—¥ã€‘é£ŸæˆŸä¹‹çµ4ç¥ä¹‹çš¿-0</p>
<p>ã€201910ã€‘ã€æ—¥ã€‘å…¥é—´åŒå­¦å…¥é­”äº†</p>
<p>ã€201910ã€‘ã€æ—¥ã€‘ä¸ƒå¤§ç½ª3</p>
<p>ã€201910ã€‘ã€æ—¥ã€‘åŠ¨ç‰©ç‹‚æƒ³æ›²BEASTARS1</p>
<p>ã€201910ã€‘ã€æ—¥ã€‘åˆ€å‰‘ç¥åŸŸ3 Alicization2</p>
<p>ã€201910ã€‘ã€å›½ã€‘ä¼å…­ä¸ƒä¹‹æœ€å¼ºå‘å‹å¸ˆ</p>
<p>ã€201908ã€‘ã€æ—¥ã€‘ä¸ºç¾å¥½çš„ä¸–ç•ŒçŒ®ä¸Šç¥ç¦ï¼çº¢ä¼ è¯´</p>
<p>ã€201907ã€‘ã€æ—¥ã€‘ç‚ç‚æ¶ˆé˜²é˜Ÿ1</p>
<p>ã€201907ã€‘ã€æ—¥ã€‘å¥³é«˜ä¸­ç”Ÿçš„è™šåº¦æ—¥å¸¸</p>
<p>ã€201907ã€‘ã€æ—¥ã€‘æµæ±—å§ï¼å¥èº«å°‘å¥³</p>
<p>ã€201907ã€‘ã€æ—¥ã€‘fate å›ä¸»Â·åŸƒå°”æ¢…ç½—äºŒä¸–äº‹ä»¶ç°¿ é­”çœ¼æ”¶é›†åˆ—è½¦ Grace note</p>
<p>ã€201907ã€‘ã€æ—¥ã€‘å†°å¯’æˆ˜è®°</p>
<p>ã€201907ã€‘ã€æ—¥ã€‘åœ¨åœ°ä¸‹åŸå¯»æ±‚é‚‚é€…æ˜¯å¦æé”™äº†ä»€ä¹ˆ2-8</p>
<p>ã€201905ã€‘ã€æ—¥ã€‘*æ™®ç½—ç±³äºš</p>
<p>ã€201904ã€‘ã€æ—¥ã€‘å¼‚ä¸–ç•Œå››é‡å¥2</p>
<p>ã€201904ã€‘ã€æ—¥ã€‘ä¸€æ‹³è¶…äºº2</p>
<p>ã€201904ã€‘ã€æ—¥ã€‘ä¸€ä¸ªäººçš„OOå°æ—¥å­</p>
<p>ã€201904ã€‘ã€æ—¥ã€‘è´¤è€…ä¹‹å­™</p>
<p>ã€201904ã€‘ã€æ—¥ã€‘æ–‡è±ªé‡çŠ¬3</p>
<p>ã€201904ã€‘ã€æ—¥ã€‘è¿›å‡»çš„å·¨äºº3</p>
<p>ã€201904ã€‘ã€æ—¥ã€‘é¬¼ç­ä¹‹åˆƒ</p>
<p>ã€201904ã€‘ã€æ—¥ã€‘CAROLE &amp; TUESDAY</p>
<p>ã€201901ã€‘ã€æ—¥ã€‘çº¦å®šçš„æ¢¦å¹»å²›</p>
<p>ã€201901ã€‘ã€æ—¥ã€‘çµèƒ½ç™¾åˆ†ç™¾2</p>
<p>ã€201901ã€‘ã€æ—¥ã€‘ç‹‚èµŒä¹‹æ¸Š2</p>
<p>ã€201901ã€‘ã€æ—¥ã€‘è¾‰å¤œå¤§å°å§æƒ³è®©æˆ‘å‘Šç™½</p>
<p>ã€201901ã€‘ã€æ—¥ã€‘å¤šç½—ç½—</p>
<p>ã€201901ã€‘ã€æ—¥ã€‘ç›¾ä¹‹å‹‡è€…æˆåå½•</p>
<p>ã€201901ã€‘ã€æ—¥ã€‘ä¸å‰æ³¢æ™®ä¸ç¬‘</p>
<h2 id="2018"><a class="header" href="#2018">2018</a></h2>
<p>ã€201810ã€‘ã€æ—¥ã€‘ä½è´ºå¶åƒæ˜¯ä¼ å¥‡</p>
<p>ã€201810ã€‘ã€æ—¥ã€‘ç»ˆå°†æˆä¸ºä½ </p>
<p>ã€201810ã€‘ã€æ—¥ã€‘é’æ˜¥çŒªå¤´å°‘å¹´ä¸ä¼šæ¢¦åˆ°å…”å¥³éƒå­¦å§</p>
<p>ã€201810ã€‘ã€æ—¥ã€‘å¼ºé£å¹æ‹‚</p>
<p>ã€201810ã€‘ã€æ—¥ã€‘å…³äºæˆ‘è½¬ç”Ÿå˜æˆå²è±å§†è¿™ä»¶äº‹</p>
<p>ã€201810ã€‘ã€æ—¥ã€‘å“¥å¸ƒæ—æ€æ‰‹</p>
<p>ã€201810ã€‘ã€æ—¥ã€‘åˆ€å‰‘ç¥åŸŸ3 Alicization1</p>
<p>ã€201810ã€‘ã€æ—¥ã€‘JOJOçš„å¥‡å¦™å†’é™©5é»„é‡‘ä¹‹é£</p>
<p>ã€201807ã€‘ã€æ—¥ã€‘æ¸¸æˆ3äººå¨˜</p>
<p>ã€201807ã€‘ã€æ—¥ã€‘å¼‚ä¸–ç•Œé­”ç‹ä¸å¬å”¤å°‘å¥³çš„å¥´éš¶é­”æœ¯</p>
<p>ã€201807ã€‘ã€æ—¥ã€‘æ€æˆ®å¤©ä½¿</p>
<p>ã€201807ã€‘ã€æ—¥ã€‘åˆƒç‰™</p>
<p>ã€201807ã€‘ã€æ—¥ã€‘è½»ç¾½é£æ‰¬</p>
<p>ã€201807ã€‘ã€æ—¥ã€‘è¿›å‡»çš„å·¨äºº3</p>
<p>ã€201807ã€‘ã€æ—¥ã€‘å·¥ä½œç»†èƒ</p>
<p>ã€201807ã€‘ã€æ—¥ã€‘ç¢§è“ä¹‹æµ·</p>
<p>ã€201807ã€‘ã€æ—¥ã€‘Overlord2</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘å®…ç”·è…å¥³æ‹çˆ±çœŸéš¾</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘æˆ‘çš„è‹±é›„å­¦é™¢3</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘é£ŸæˆŸä¹‹çµova</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘èµ›é©¬å¨˜</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘å¥´éš¶åŒº</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘é­”æ€§ä¹‹çº¿</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘é­”æ³•å°‘å¥³ç½‘ç«™</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘é­”æ³•å°‘å¥³ä¿º</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘é»‘ç¤¾ä¼šçš„è¶…èƒ½åŠ›å¥³å„¿</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘è‹å¤©ä¹‹æ‹³1</p>
<p>ã€201804ã€‘ã€æ—¥ã€‘MegaloBOX1</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘ç´«ç½—å…°æ°¸æ’èŠ±å›­</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘æ¸¸æˆäººç”Ÿå‰§åœºç‰ˆ</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘æ‘‡æ›³éœ²è¥</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘ç‰™æ–—å…½å¨˜</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘é½æœ¨æ¥ é›„çš„ç¾éš¾2</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘ä¸ƒå¤§ç½ª2</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘é¾™ç‹çš„å·¥ä½œ</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘åˆ»åˆ»-æ—¶é—´æš‚åœ</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘åšå¤šè±šéª¨æ‹‰é¢</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘æ¯”å®‡å®™æ›´é¥è¿œçš„åœ°æ–¹</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘OVERLORD</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘darling</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘Citrusï½æŸ‘æ©˜å‘³é¦™æ°”ï½</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘Bï¼šå½¼ä¹‹åˆ</p>
<p>ã€201801ã€‘ã€æ—¥ã€‘A.I.C.O. Incarnation</p>
<h2 id="2017"><a class="header" href="#2017">2017</a></h2>
<p>ã€201710ã€‘ã€æ—¥ã€‘æ‚ ä¹…æŒæœ‰è€…! é­”æ³•è€å¸ˆ2</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘è¡€ç•Œæˆ˜çº¿2</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘é£ŸæˆŸä¹‹çµ3é¤ä¹‹çš¿</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘å°‘å¥³ç»ˆæœ«æ—…è¡Œ</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘å¥‡è¯ºä¹‹æ—…2</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘é­”æ³•ä½¿çš„æ–°å¨˜</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘å›½ç‹æ¸¸æˆ</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘å…³äºæˆ‘å¥³å‹æ˜¯ä¸€ä¸ªæ­£ç»çš„ç¢§æ± è¿™ä»¶äº‹</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘å¹²ç‰©å¦¹å°åŸ‹2</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘è°ƒæ•™å’–å•¡å…</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘*å®çŸ³ä¹‹å›½</p>
<p>ã€201710ã€‘ã€æ—¥ã€‘fate stay night heaven's feel å‰§åœºç‰ˆ</p>
<p>ã€201707ã€‘ã€æ—¥ã€‘NewGame2</p>
<p>ã€201707ã€‘ã€æ—¥ã€‘ç¬¨å¥³å­©</p>
<p>ã€201707ã€‘ã€æ—¥ã€‘å¸¦ç€æ™ºæ…§å‹æ‰‹æœºé—¯è¡å¼‚ä¸–ç•Œ</p>
<p>ã€201707ã€‘ã€æ—¥ã€‘æ¬¢è¿æ¥åˆ°å®åŠ›è‡³ä¸Šä¸»ä¹‰æ•™å®¤1</p>
<p>ã€201707ã€‘ã€æ—¥ã€‘ç‹‚èµŒä¹‹æ¸Š1</p>
<p>ã€201707ã€‘ã€æ—¥ã€‘<a href="https://www.agemys.cc/detail/20170051"><strong>æ¥è‡ªæ·±æ¸Š1</strong></a></p>
<p>ã€201707ã€‘ã€æ—¥ã€‘æ‹çˆ±ç¦æ­¢çš„ä¸–ç•Œ</p>
<p>ã€201707ã€‘ã€æ—¥ã€‘éª‘å£«ä¸é­”æ³•</p>
<p>ã€201704ã€‘ã€æ—¥ã€‘æ¨±èŠ±ä»»åŠ¡</p>
<p>ã€201704ã€‘ã€æ—¥ã€‘æ­¦è£…å°‘å¥³</p>
<p>ã€201704ã€‘ã€æ—¥ã€‘æˆ‘çš„è‹±é›„å­¦é™¢2</p>
<p>ã€201704ã€‘ã€æ—¥ã€‘æˆ‘çš„å¦¹å¦¹æ˜¯é»„æ¼«è€å¸ˆ</p>
<p>ã€201704ã€‘ã€æ—¥ã€‘æœ«æ—¥æ—¶åœ¨åšä»€ä¹ˆï¼Ÿæœ‰æ²¡æœ‰ç©ºï¼Ÿå¯ä»¥æ¥æ‹¯æ•‘å—ï¼Ÿ</p>
<p>ã€201704ã€‘ã€æ—¥ã€‘è·¯äººå¥³ä¸»çš„å…»æˆæ–¹å¼2</p>
<p>ã€201704ã€‘ã€æ—¥ã€‘é›¶ä¹‹é­”æ³•ä¹¦</p>
<p>ã€201704ã€‘ã€æ—¥ã€‘è¿›å‡»çš„å·¨äºº2</p>
<p>ã€201704ã€‘ã€æ—¥ã€‘Re:Creators</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘ACCA13åŒºç›‘å¯Ÿè¯¾</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘Hand Shakers</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘çƒ­è¯šä¼ è¯´2</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘é£™é€Ÿå®…ç”·3</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘çˆç™¾ç’ƒçš„å •è½</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘å…½å¨˜åŠ¨ç‰©å›­</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘å…½å¨˜åŠ¨ç‰©å›­</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘ä¸ºç¾å¥½çš„ä¸–ç•ŒçŒ®ä¸Šç¥ç¦2</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘å°æ—å®¶çš„é¾™å¥³ä»†</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘<strong>å°é­”å¥³å­¦å›­</strong></p>
<p>ã€201701ã€‘ã€æ—¥ã€‘äºšäººé…±æœ‰è¯è¦è¯´</p>
<p>ã€201701ã€‘ã€æ—¥ã€‘<strong>å¹¼å¥³æˆ˜è®°</strong></p>
<p>ã€201701ã€‘ã€æ—¥ã€‘æ”¿å®—å›çš„å¤ä»‡</p>
<h2 id="2016"><a class="header" href="#2016">2016</a></h2>
<p>ã€201610ã€‘ã€æ—¥ã€‘æˆ‘å¤ªå—æ¬¢è¿äº†è¯¥æ€ä¹ˆåŠ</p>
<p>ã€201610ã€‘ã€æ—¥ã€‘æˆ‘çš„è€å©†æ˜¯å­¦ç”Ÿä¼šé•¿2</p>
<p>ã€201610ã€‘ã€æ—¥ã€‘æ–‡è±ªé‡çŠ¬2</p>
<p>ã€201610ã€‘ã€æ—¥ã€‘å°‘å¥³ç¼–å·</p>
<p>ã€201610ã€‘ã€æ—¥ã€‘æ¼‚æµæ­¦å£«</p>
<p>ã€201610ã€‘ã€æ—¥ã€‘é­”æ³•å°‘å¥³è‚²æˆè®¡åˆ’</p>
<p>ã€201610ã€‘ã€æ—¥ã€‘è¶…è‡ªç„¶9äººç»„</p>
<p>ã€201610ã€‘ã€æ—¥ã€‘å†°ä¸Šçš„å°¤é‡Œ</p>
<p>ã€201610ã€‘ã€å›½ã€‘äºšäºº2</p>
<p>ã€201610ã€‘ã€å›½ã€‘å‡¸å˜è‹±é›„</p>
<p>ã€201607ã€‘ã€æ—¥ã€‘è¿™ä¸ªç¾æœ¯ç¤¾å¤§æœ‰é—®é¢˜ï¼</p>
<p>ã€201607ã€‘ã€æ—¥ã€‘é£ŸæˆŸä¹‹çµ2è´°ä¹‹çš¿</p>
<p>ã€201607ã€‘ã€æ—¥ã€‘çƒ­è¯šä¼ è¯´1</p>
<p>ã€201607ã€‘ã€æ—¥ã€‘é½æœ¨æ¥ é›„çš„ç¾éš¾1</p>
<p>ã€201607ã€‘ã€æ—¥ã€‘çµèƒ½ç™¾åˆ†ç™¾1</p>
<p>ã€201607ã€‘ã€æ—¥ã€‘å¼¹ä¸¸è®ºç ´3</p>
<p>ã€201607ã€‘ã€æ—¥ã€‘NEW GAME1</p>
<p>ã€201607ã€‘ã€å›½ã€‘ä¸€äººä¹‹ä¸‹</p>
<p>ã€201604ã€‘ã€æ—¥ã€‘åœ¨ä¸‹å‚æœ¬ï¼Œæœ‰ä½•è´µå¹²ï¼Ÿ</p>
<p>ã€201604ã€‘ã€æ—¥ã€‘çº¿ä¸Šæ¸¸æˆçš„è€å©†ä¸å¯èƒ½æ˜¯å¥³ç”Ÿï¼Ÿ</p>
<p>ã€201604ã€‘ã€æ—¥ã€‘æˆ‘çš„è‹±é›„å­¦é™¢1</p>
<p>ã€201604ã€‘ã€æ—¥ã€‘æ–‡è±ªé‡çŠ¬1</p>
<p>ã€201604ã€‘ã€æ—¥ã€‘ç”²é“åŸçš„å¡å·´å†…ç‘</p>
<p>ã€201604ã€‘ã€æ—¥ã€‘Reï¼šä»é›¶å¼€å§‹çš„å¼‚ç•Œç”Ÿæ´»</p>
<p>ã€201604ã€‘ã€æ—¥ã€‘jojoçš„å¥‡å¦™å†’é™©4 ä¸ç­é’»çŸ³</p>
<p>ã€201601ã€‘ã€æ—¥ã€‘åªæœ‰æˆ‘ä¸åœ¨çš„è¡—é“</p>
<p>ã€201601ã€‘ã€æ—¥ã€‘æ— å¤´éª‘å£«å¼‚é—»å½• x2 ç»“</p>
<p>ã€201601ã€‘ã€æ—¥ã€‘ä¸ºç¾å¥½çš„ä¸–ç•ŒçŒ®ä¸Šç¥ç¦1</p>
<p>ã€201601ã€‘ã€æ—¥ã€‘ç°ä¸å¹»æƒ³çš„æ ¼æ—å§†è¿¦å°”</p>
<p>ã€201601ã€‘ã€å›½ã€‘äºšäºº1</p>
<h2 id="2015"><a class="header" href="#2015">2015</a></h2>
<p>ã€201510ã€‘ã€æ—¥ã€‘æ¨±å­å°å§çš„è„šä¸‹åŸ‹ç€å°¸ä½“</p>
<p>ã€201510ã€‘ã€æ—¥ã€‘é‡è‰¯ç¥ ARAGOTO</p>
<p>ã€201510ã€‘ã€æ—¥ã€‘æˆ‘è¢«ç»‘æ¶åˆ°è´µæ—å¥³æ ¡å½“åº¶æ°‘æ ·æœ¬</p>
<p>ã€201507ã€‘ã€æ—¥ã€‘å­¦å›­å­¤å²›</p>
<p>ã€201507ã€‘ã€æ—¥ã€‘æ— å¤´éª‘å£«å¼‚é—»å½• x2 è½¬</p>
<p>ã€201507ã€‘ã€æ—¥ã€‘æˆ‘è€å©†æ˜¯å­¦ç”Ÿä¼šé•¿</p>
<p>ã€201507ã€‘ã€æ—¥ã€‘å™¬ç¥è€…</p>
<p>ã€201507ã€‘ã€æ—¥ã€‘ç»…å£«å­¦å›­</p>
<p>ã€201507ã€‘ã€æ—¥ã€‘é»‘è¡—GANGSTA</p>
<p>ã€201507ã€‘ã€æ—¥ã€‘å¹²ç‰©å¦¹ï¼å°åŸ‹</p>
<p>ã€201507ã€‘ã€æ—¥ã€‘OVERLORD1</p>
<p>ã€201504ã€‘ã€æ—¥ã€‘è¡€ç•Œæˆ˜çº¿1</p>
<p>ã€201504ã€‘ã€æ—¥ã€‘é£ŸæˆŸä¹‹çµ1</p>
<p>ã€201504ã€‘ã€æ—¥ã€‘å¹å“å§ï¼ä¸Šä½éŸ³å·</p>
<h2 id="2014"><a class="header" href="#2014">2014</a></h2>
<p>ã€201310ã€‘ã€æ—¥ã€‘å¯„ç”Ÿå…½</p>
<p>ã€201310ã€‘ã€æ—¥ã€‘è®°å½•çš„åœ°å¹³çº¿2</p>
<p>ã€201410ã€‘ã€æ—¥ã€‘å¢ƒç•Œè§¦å‘è€…1</p>
<p>ã€201404ã€‘ã€æ—¥ã€‘è¿›å‡»çš„å·¨äºº1</p>
<p>ã€201401ã€‘ã€æ—¥ã€‘é‡è‰¯ç¥1</p>
<h2 id="2013"><a class="header" href="#2013">2013</a></h2>
<p>ã€201310ã€‘ã€æ—¥ã€‘è®°å½•çš„åœ°å¹³çº¿1</p>
<p>ã€201310ã€‘ã€æ—¥ã€‘æ–©æœå°‘å¥³</p>
<p>ã€201307ã€‘ã€æ—¥ã€‘æ‹çˆ±ç ”ç©¶æ‰€</p>
<p>ã€201304ã€‘ã€æ—¥ã€‘æŸç§‘å­¦çš„è¶…ç”µç£ç‚®S</p>
<h2 id="2012"><a class="header" href="#2012">2012</a></h2>
<p>ã€201209ã€‘ã€æ—¥ã€‘æ¥è‡ªæ–°ä¸–ç•Œ</p>
<p>ã€201201ã€‘ã€æ—¥ã€‘Another</p>
<h2 id="2011"><a class="header" href="#2011">2011</a></h2>
<h2 id="2010"><a class="header" href="#2010">2010</a></h2>
<p>ã€201010ã€‘ã€æ—¥ã€‘é­”æ³•ç¦ä¹¦ç›®å½•2</p>
<h2 id="2009"><a class="header" href="#2009">2009</a></h2>
<p>ã€200910ã€‘ã€æ—¥ã€‘æŸç§‘å­¦çš„è¶…ç”µç£ç‚®</p>
<h2 id="2008"><a class="header" href="#2008">2008</a></h2>
<p>ã€200810ã€‘ã€æ—¥ã€‘é­”æ³•ç¦ä¹¦ç›®å½•1</p>
<h2 id="2007"><a class="header" href="#2007">2007</a></h2>
<p>ã€200704ã€‘ã€æ—¥ã€‘å¤§å‰‘</p>
<h2 id="2006"><a class="header" href="#2006">2006</a></h2>
<p>ã€200610ã€‘ã€æ—¥ã€‘æ­»äº¡ç¬”è®°</p>
<h2 id="1995"><a class="header" href="#1995">1995</a></h2>
<p>ã€199510ã€‘ã€æ—¥ã€‘æ–°ä¸–çºªç¦éŸ³æˆ˜å£«</p>
<div style="break-before: page; page-break-before: always;"></div><p>+++</p>
<p>title = &quot;go.0å¼€å§‹&quot;
description = &quot;go.0å¼€å§‹&quot;
tags = [&quot;it&quot;,&quot;lang&quot;,&quot;go&quot;]</p>
<p>+++</p>
<h1 id="goå¼€å§‹"><a class="header" href="#goå¼€å§‹">go.å¼€å§‹</a></h1>
<blockquote>
<p><a href="https://go.dev/">å®˜ç½‘</a>ã€‚</p>
</blockquote>
<h2 id="go"><a class="header" href="#go">go</a></h2>
<p><a href="https://go.dev/dl/">ä¸‹è½½</a>å¹¶è§£å‹ï¼šlinux é€‰æ‹© .linux-amd64.tar.gzï¼Œwin é€‰æ‹© .windows-amd64.zip</p>
<p>ç¯å¢ƒå˜é‡ï¼šé…ç½® GOROOT &amp; GOPATHï¼Œå¹¶å°†å…¶ bin ç›®å½•æ·»åŠ åˆ° PATH åï¼Œgo install å®‰è£…çš„ç¨‹åºå°†ä¿å­˜åˆ° <code>$GOPATH/bin</code> ä¸‹</p>
<pre><code class="language-shell"># å‘ ~/.bashrc (æˆ– /etc/profile) æ·»åŠ ç¯å¢ƒå˜é‡
sed -i '$a\
\
\
# go\
export PATH=$PATH:~/langs/go1.19.3/bin:~/langs/gopath/bin\
export GOROOT=~/langs/go1.19.3\
export GOPATH=~/langs/gopath\
export GOPROXY=https://goproxy.cn,direct\
alias goland=&quot;nohup ~/langs/goland-2021.2.3//bin/goland.sh &gt;/dev/null &amp; 2&gt;&amp;1&quot;' ~/.bashrc
# åˆ·æ–°
source ~/.bashrc
</code></pre>
<p>é…ç½®</p>
<pre><code class="language-shell"># å¿…è¦é…ç½®
go env -w GOROOT=~/it/go/go
go env -w GOPATH=~/it/go/gopath

# ä¸ƒç‰›äº‘ä»£ç†ã€‚&quot;goproxy.io&quot;ã€&quot;goproxy.cn&quot;ã€&quot;mirrors.aliyun.com/goproxy/&quot; ç­‰ä»»é€‰å…¶ä¸€
go env -w GOPROXY=https://goproxy.cn,direct
# gomodï¼Œ1.14åé»˜è®¤å¼€å¯
go env -w GO111MODULE=on

# å¯é€‰é…ç½®
# è®¾ç½®GOPRIVATEæ¥è·³è¿‡ç§æœ‰åº“ï¼Œæ¯”å¦‚å¸¸ç”¨çš„Gitlabæˆ–Giteeï¼Œä¸­é—´ä½¿ç”¨é€—å·åˆ†éš”
go env -w GOPRIVATE=*.gitlab.com,*.gitee.com 
# å¦‚æœåœ¨è¿è¡Œgo mod vendoræ—¶ï¼Œæç¤ºGet https://sum.golang.org/lookup/xxxxxx: dial tcp 216.58.200.49:443: i/o timeoutï¼Œåˆ™æ˜¯å› ä¸ºGo 1.13è®¾ç½®äº†é»˜è®¤çš„GOSUMDB=sum.golang.orgï¼Œè¿™ä¸ªç½‘ç«™æ˜¯è¢«å¢™äº†çš„ï¼Œç”¨äºéªŒè¯åŒ…çš„æœ‰æ•ˆæ€§ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤å…³é—­ã€‚ç§æœ‰ä»“åº“è‡ªåŠ¨å¿½ç•¥éªŒè¯
go env -w GOSUMDB=off 
# å¯ä»¥è®¾ç½® GOSUMDB=&quot;sum.golang.google.cn&quot;ï¼Œ è¿™ä¸ªæ˜¯ä¸“é—¨ä¸ºå›½å†…æä¾›çš„sum éªŒè¯æœåŠ¡
go env -w GOSUMDB=&quot;sum.golang.google.cn&quot; 
</code></pre>
<h2 id="goland"><a class="header" href="#goland">goland</a></h2>
<p>ä¸‹è½½å¹¶è§£å‹ï¼šhttps://www.jetbrains.com/go/download/other.html</p>
<pre><code class="language-sh"># åˆ«åã€‚ä½¿ goland nohupï¼Œå¹¶å°†å…¶äº§ç”Ÿçš„ stdout é‡å®šå‘åˆ° /dev/null
$ vim /etc/profile
#æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œgolandå°†ä¸è¾“å‡ºä»»ä½•ä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿ nohup.out
alias goland='nohup ~/go/goland/bin/goland.sh &gt;/dev/null &amp; 2&gt;&amp;1'
</code></pre>
<h3 id="å¸¸ç”¨è®¾ç½®"><a class="header" href="#å¸¸ç”¨è®¾ç½®">å¸¸ç”¨è®¾ç½®</a></h3>
<ol>
<li>
<p>go</p>
</li>
<li>
<p>go modï¼šå¼€å¯å³å¯</p>
</li>
<li>
<p>proto import</p>
<ol>
<li>Golandæ’ä»¶Protocol Buffer Editorï¼šConfigure â†’ Setting â†’ Protocol Buffers â†’ å–æ¶ˆå‹¾é€‰Configure automatically â†’ æ·»åŠ æ‰€éœ€ç›®å½•
<ol>
<li>ä¸€èˆ¬æ˜¯å½“å‰projectæˆ–moduleçš„ä¸Šä¸€çº§ç›®å½•ï¼Œä»¥ä½¿ç”Ÿæˆçš„goæ–‡ä»¶ä¾ç„¶ä¿æŒæ­£ç¡®çš„åŒ…å¯¼å…¥è·¯å¾„ï¼Œä¸”å‰ç¼€ç»Ÿä¸€æ›´å…·å¯è¯»æ€§ï¼›D:/it/go/GoProject/pkg/mod</li>
<li>å¦‚æœç”¨åˆ°go modå¯¼å…¥çš„å†…å®¹ï¼Œè¿˜éœ€è¦æ·»åŠ go modåŒ…æ‰€åœ¨ç›®å½•ã€‚D:/it/go/GoProject/pkg/mod</li>
</ol>
</li>
<li>å¦‚æœæ˜¯<code>protoc</code>å‘½ä»¤å·¥å…·ï¼šåˆ™æ·»åŠ  <code>-I</code> å‚æ•°æŒ‡å®šç›®å½•</li>
</ol>
</li>
<li>
<p>ç¼–ç ï¼šConfigure â†’ Setting â†’ Editor â†’ File Encodings</p>
</li>
<li>
<p>å…¨é€‰ä¸ºUTF-8ï¼Œwith NO BOM</p>
<ol start="2">
<li>Transparent native-to-ascii conversionè‡ªåŠ¨è½¬æ¢ASCIIç¼–ç ï¼šå»ºè®®å‹¾é€‰ã€‚å¯èƒ½æ„æ€æ˜¯ï¼Œåœ¨æ–‡ä»¶ä¸­è¾“å…¥æ–‡å­—æ—¶ä»–ä¼šè‡ªåŠ¨çš„è½¬æ¢ä¸ºUnicodeç¼–ç ï¼Œç„¶ååœ¨ideaä¸­å‘å¼€æ–‡ä»¶æ—¶ä»–ä¼šè‡ªåŠ¨è½¬å›æ–‡å­—æ¥æ˜¾ç¤º</li>
</ol>
</li>
<li>
<p>æ³¨è§£ç”Ÿæ•ˆæ¿€æ´»ï¼šConfigure â†’ Setting â†’ Compiler â†’ Annotation Processors</p>
<ol>
<li>Enable annotation processing</li>
</ol>
</li>
<li>
<p>æ–‡ä»¶è¿‡æ»¤ï¼šConfigure â†’ Setting â†’ Editor â†’ File Types</p>
<ol>
<li>ActionScript â†’ Ignore files and foldersï¼šæ·»åŠ  *.idea;*.iml; è¿›å»</li>
</ol>
</li>
<li>
<p>å­—ä½“ï¼šConfigure â†’ Setting â†’ Editor â†’ Font</p>
</li>
<li>
<p>ä¸»é¢˜ï¼šConfigure â†’ Setting â†’ Editor â†’ Color Scheme</p>
</li>
<li>
<p>èƒŒæ™¯å›¾ï¼šCtrl+Shift+Aï¼Œæœç´¢set background Image</p>
</li>
<li>
<p>å‚æ•°åæç¤ºï¼šCtrl+Shift+Aï¼Œæœç´¢show parameter name hints</p>
</li>
<li>
<p>æ–‡æ¡£æ¨¡æ¿æ³¨é‡Šï¼š</p>
<pre><code class="language-java">   /* ç±»æ–‡æ¡£æ³¨é‡Šæ¨¡æ¿é…ç½®
   1.file - settings - editor - file and data templates
   2.includs - file header - å³ç©ºç™½æ¡†å†…å¤åˆ¶ä¸‹é¢ç±»æ–‡æ¡£æ³¨é‡Šæ¨¡æ¿
   3.æ–°å»ºç±»æ—¶è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£æ³¨é‡Š
   */
   /** ç±»æ–‡æ¡£æ¨¡æ¿
   @title: ${NAME}
   @projectName ${PROJECT_NAME}
   @description: TODO
   @author ${USER}
   @date ${DATE}${TIME}
    */
   public class DocumentAnnotationTemplate {
       /* æ–¹æ³•æ–‡æ¡£æ³¨é‡Šæ¨¡æ¿é…ç½®
       1.file - settings - editor - live templates
       2.å³+å· - template group - åaaa(åœ¨æœ€å‰æ¯”è¾ƒæ–¹ä¾¿)
       3.é€‰ä¸­aaa - live template - åann - æè¿°ann - ç©ºç™½æ¡†å†…å¤åˆ¶ä¸‹é¢æ–¹æ³•æ³¨é‡Šæ¨¡æ¿ - define - everywhere
       3.æ–°å»ºæ–¹æ³•ååœ¨æ–¹æ³•ä¸Šé¢è¾“å…¥ann - æŒ‰tabè¡¥å…¨
       */
       /** æ–¹æ³•æ¨¡æ¿
       @description: TODO
       @param ${tags}
       @return ${return_type}
       @throws
       @author ${USER}
       @date ${DATE}${TIME}
        */
       public void function() { }
}
</code></pre>
</li>
<li>
<p>evaluate expressionï¼šhttps://www.cnblogs.com/mrmoo/p/9942605.html</p>
</li>
</ol>
<h3 id="é‡ç½®è¯•ç”¨"><a class="header" href="#é‡ç½®è¯•ç”¨">é‡ç½®è¯•ç”¨</a></h3>
<p>æ–¹å¼1ï¼šåˆ é™¤å®¶ç›®å½•ä¸‹çš„è¯•ç”¨é…ç½®æ–‡ä»¶å¤¹</p>
<pre><code class="language-shell">rm -rf ~/.config/JetBrains/GoLand20xx.x/eval/
# winä¸‹ä¸º~\AppData\Local\JetBrains\GoLand2021.2
</code></pre>
<p>æ–¹å¼2ï¼šå®‰è£…æ’ä»¶ Eval Resetï¼Œç‚¹å‡» help-&gt;Eval Reset-&gt;reset å³å¯æ— é™<a href="https://zhile.io/2020/11/18/jetbrains-eval-reset-deprecated.html">é‡ç½®è¯•ç”¨</a>ã€‚é€‚ç”¨äº 2021.2.3 åŠä»¥å‰ï¼Œ2021.2.4 å¼€å§‹å¿…é¡»è”ç½‘ç™»å½•è´¦å·æ‰èƒ½ä½¿ç”¨ã€‚å¯ä»¥å‹¾é€‰ Auto reset before per restart</p>
<p>æ–¹å¼3ï¼šç ´è§£ã€‚ç ´è§£å‰æ‰“å¼€ golandï¼Œé€‰æ‹©è¯•ç”¨ï¼›ä¸‹è½½ç ´è§£æ–‡ä»¶ jetbrains-agent.jar 2020ç‰ˆæœ¬ï¼Œå°† jetbrains-agent.jar æ‹–å…¥golandçª—å£ï¼Œä¼šæç¤ºrestartï¼Œç‚¹å‡»restartå³å¯å®Œæˆç ´è§£ã€‚é€‚ç”¨äº2021.1.2åŠå…¶ä»¥å‰ï¼ˆç°åœ¨å¥½åƒ2021.1.2å·²ç»ä¸è¡Œäº†ï¼‰</p>
<h2 id="hello"><a class="header" href="#hello">hello</a></h2>
<pre><code class="language-go">package main

import &quot;fmt&quot;

func main() {
	fmt.Println(&quot;Hello world!&quot;)
}
</code></pre>
<pre><code class="language-shell">$ go run main.go
Hello world!
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>+++</p>
<p>title = &quot;kubernetes&quot;
description = &quot;it.cloud.kubernetes&quot;
tags = [&quot;it&quot;, &quot;cloud&quot;, &quot;kubernetes&quot;]</p>
<p>+++</p>
<h1 id="kuberneteså¼€å§‹"><a class="header" href="#kuberneteså¼€å§‹">kubernetes.å¼€å§‹</a></h1>
<h2 id="å®‰è£…"><a class="header" href="#å®‰è£…">å®‰è£…</a></h2>
<p>éµç…§<a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#%E5%87%86%E5%A4%87%E5%BC%80%E5%A7%8B">kubeadmå®‰è£…å‡†å¤‡</a>ï¼Œç¦ç”¨äº¤æ¢åˆ†åŒºï¼Œå¯ç”¨<a href="https://kubernetes.io/zh/docs/reference/ports-and-protocols/">å¿…éœ€ç«¯å£</a>å¹¶è¿›è¡Œ<a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#check-required-ports">æ£€æŸ¥</a>ï¼Œ<a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#%E5%85%81%E8%AE%B8-iptables-%E6%A3%80%E6%9F%A5%E6%A1%A5%E6%8E%A5%E6%B5%81%E9%87%8F">å…è®¸iptablesæ£€æŸ¥æ¡¥æ¥æµé‡</a>ã€‚</p>
<pre><code class="language-shell"># å…³é—­swapåˆ†åŒº(æ°¸ä¹…)ï¼šæŠŠåŠ è½½swapåˆ†åŒºçš„é‚£è¡Œè®°å½•æ³¨é‡Šæ‰ï¼Œé‡å¯ç”Ÿæ•ˆ
sed -ri 's/.*swap.*/#&amp;/' /etc/fstab

# é…ç½®br_netfilteræ¨¡å—
cat &lt;&lt;EOF | tee /etc/modules-load.d/k8s.conf
br_netfilter
EOF
# åŠ è½½ã€‚ä¹Ÿå¯ä»¥rebootä»¥åŠ è½½
modprobe  br_netfilter &amp;&amp; lsmod | grep br_netfilter

# å…è®¸iptablesæ£€æŸ¥æ¡¥æ¥æµé‡
cat &lt;&lt;EOF | tee /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
EOF
# ä½¿ç”Ÿæ•ˆ
sysctl --system
</code></pre>
<h3 id="ubuntu"><a class="header" href="#ubuntu">ubuntu</a></h3>
<pre><code class="language-shell"># å…³é—­swapåˆ†åŒº(ä¸´æ—¶)
swapoff -a

# é˜²ç«å¢™ï¼šå…³é—­é˜²ç«å¢™æˆ–è€…å¼€æ”¾å®˜æ–¹æŒ‡å—ä¸­æŒ‡å®šçš„ç«¯å£ã€‚ubuntué»˜è®¤ä¸ºå…³é—­çŠ¶æ€ï¼Œè¿™é‡Œä»…æŸ¥çœ‹
ufw status

# å¿…è¦å·¥å…·
apt install -y apt-transport-https ca-certificates curl gnupg lsb-release
</code></pre>
<h4 id="docker"><a class="header" href="#docker">docker</a></h4>
<blockquote>
<p><a href="https://yeasy.gitbook.io/docker_practice/install/ubuntu">ubuntuå®‰è£…docker</a>ï¼›</p>
</blockquote>
<pre><code class="language-shell"># å‹¿åœ¨æ²¡æœ‰é…ç½®Docker APTæºçš„æƒ…å†µä¸‹ç›´æ¥ä½¿ç”¨aptå‘½ä»¤å®‰è£…Docker
# å…ˆå¸è½½
apt remove -y docker.io
apt remove -y docker
apt remove -y docker-engine
</code></pre>
<p>ubuntu20.04åå°è¿è¡Œçš„openvpnä¼š<a href="https://askubuntu.com/questions/1302371/docker-ce-post-installation-configuration-failure-on-ubuntu-20-04">å½±å“docker-ceå®‰è£…</a>ï¼Œäº§ç”Ÿ<code>Errors were encountered while processing</code></p>
<pre><code class="language-shell"># åœæ­¢openvpn
service openvpn stop
</code></pre>
<pre><code class="language-shell"># GPGå¯†é’¥
curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
# aptæº
echo &quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot; | tee /etc/apt/sources.list.d/docker.list &gt; /dev/null

# å®‰è£…
apt update &amp;&amp; apt install -y docker-ce docker-ce-cli containerd.io
# å¼€æœºå¯åŠ¨å¹¶ç«‹å³å¯åŠ¨
systemctl enable --now docker &amp;&amp; systemctl status docker
</code></pre>
<h4 id="kubernetes"><a class="header" href="#kubernetes">kubernetes</a></h4>
<pre><code class="language-shell"># GPGå¯†é’¥
curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg
# aptæº
echo &quot;deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main&quot; | sudo tee /etc/apt/sources.list.d/kubernetes.list

# æŸ¥çœ‹ç‰ˆæœ¬ã€‚å°è¯•äº†kubeadm1.25+docker-ce20ç‰ˆæœ¬å‡ºé”™ï¼Œå› æ­¤é™ä½kubeadmç‰ˆæœ¬
apt-cache madison kubeadm | grep 1.23
# å®‰è£…
apt update &amp;&amp; apt install -y kubeadm=1.23.14-00 kubelet=1.23.14-00 kubectl=1.23.14-00

# å¼€æœºå¯åŠ¨å¹¶ç«‹å³å¯åŠ¨
# ä½†kubeletç°åœ¨æ¯éš”å‡ ç§’å°±ä¼šé‡å¯ï¼Œå› ä¸ºå®ƒé™·å…¥äº†ä¸€ä¸ªç­‰å¾…kubeadmæŒ‡ä»¤çš„æ­»å¾ªç¯
systemctl enable --now kubelet &amp;&amp; systemctl status kubelet
</code></pre>
<h3 id="centos"><a class="header" href="#centos">centos</a></h3>
<pre><code class="language-shell"># å…³é—­swapåˆ†åŒº(ä¸´æ—¶)
setenforce 0

# é˜²ç«å¢™ï¼šå…³é—­é˜²ç«å¢™æˆ–è€…å¼€æ”¾å®˜æ–¹æŒ‡å—ä¸­æŒ‡å®šçš„ç«¯å£
systemctl disable --now firewalld &amp;&amp; firewall-cmd --state
</code></pre>
<h4 id="docker-1"><a class="header" href="#docker-1">docker</a></h4>
<p>å®‰è£…å®¹å™¨è¿è¡Œæ—¶ï¼Œè¿™é‡Œé€‰æ‹©dockerï¼Œè®¾ç½® <a href="https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo">docker é˜¿é‡Œæº</a>å­˜å‚¨åº“ï¼Œç„¶å<a href="https://docs.docker.com/engine/install/rhel/#install-docker-engine">å®‰è£… Docker Engine å’Œ containerd</a> ã€‚</p>
<pre><code class="language-shell"># yumæº
cat &lt;&lt;EOF | tee /etc/yum.repos.d/docker.repo
[docker-ce-stable]
name=Docker CE Stable - $basearch
baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/\$releasever/\$basearch/stable
enabled=1
gpgcheck=1
gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg
EOF

# å®‰è£…Docker Engineå’Œ containerd
# centos8é»˜è®¤ä½¿ç”¨podmanä»£æ›¿ dockerï¼Œä¼šæç¤ºå†²çªï¼Œæ ¹æ®æç¤ºä½¿ç”¨--allowerasingå‚æ•°ï¼Œè¡¨ç¤ºæ›¿æ¢å†²çªçš„è½¯ä»¶åŒ…
yum install -y --allowerasing docker-ce docker-ce-cli containerd.io

# è®¾ç½®å¼€æœºå¯åŠ¨å¹¶ç«‹å³å¯åŠ¨
systemctl enable --now docker &amp;&amp; systemctl status docker
</code></pre>
<h4 id="kubernetes-1"><a class="header" href="#kubernetes-1">kubernetes</a></h4>
<p>ä½¿ç”¨ centos8 åŸç”ŸåŒ…ç®¡ç†å·¥å…·<a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#%E5%AE%89%E8%A3%85-kubeadm-kubelet-%E5%92%8C-kubectl">å®‰è£… kubeadmã€kubelet å’Œ kubectl</a>ï¼Œä½¿ç”¨ <a href="https://mirrors.aliyun.com/kubernetes/yum/repos/">kubernetes é˜¿é‡Œæº</a>ã€‚</p>
<pre><code class="language-shell">cat &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt; EOF
[kubernetes]
name=Kubernetes
baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-\$basearch
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg
exclude=kubelet kubeadm kubectl
EOF

# å°† SELinux è®¾ç½®ä¸º permissive æ¨¡å¼ï¼ˆç›¸å½“äºå°†å…¶ç¦ç”¨ï¼‰ã€‚ä¸´æ—¶è®¾ç½®ç«‹å³ç”Ÿæ•ˆï¼Œå¹¶æ°¸ä¹…ç¦ç”¨
setenforce 0
sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config

# å®‰è£…ã€‚kubelet-x.x.x kubeadm-x.x.x kubectl-x.x.x å¯ä»¥æŒ‡å®šç‰ˆæœ¬
yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes
# è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨å¹¶ç«‹å³å¯åŠ¨ï¼Œä½† kubelet ç°åœ¨æ¯éš”å‡ ç§’å°±ä¼šé‡å¯ï¼Œå› ä¸ºå®ƒé™·å…¥äº†ä¸€ä¸ªç­‰å¾… kubeadm æŒ‡ä»¤çš„æ­»å¾ªç¯
systemctl enable --now kubelet
# æŸ¥çœ‹ kubelet
systemctl status kubelet
</code></pre>
<h3 id="äºŒè¿›åˆ¶"><a class="header" href="#äºŒè¿›åˆ¶">äºŒè¿›åˆ¶</a></h3>
<h4 id="kubectl"><a class="header" href="#kubectl">kubectl</a></h4>
<blockquote>
<p><a href="https://kubernetes.io/zh-cn/docs/tasks/tools/install-kubectl-linux/">å®‰è£…kubectl</a>ã€‚</p>
</blockquote>
<pre><code class="language-shell"># kubectl
curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot;
# æ ¡éªŒå’Œ
curl -LO &quot;https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256&quot;
# æ ¡éªŒ
echo &quot;$(cat kubectl.sha256)  kubectl&quot; | sha256sum --check
# ç§»åŠ¨
mv kubectl /usr/local/bin
</code></pre>
<h2 id="å‡†å¤‡"><a class="header" href="#å‡†å¤‡">å‡†å¤‡</a></h2>
<h3 id="é…ç½®å®¹å™¨-cgroup-é©±åŠ¨"><a class="header" href="#é…ç½®å®¹å™¨-cgroup-é©±åŠ¨">é…ç½®å®¹å™¨ cgroup é©±åŠ¨</a></h3>
<blockquote>
<p><a href="https://kubernetes.io/zh/docs/setup/production-environment/container-runtimes/#docker">dokceré…ç½®systemdä½œcgroupé©±åŠ¨</a>ï¼›</p>
<p><a href="https://kubernetes.io/zh/docs/tasks/administer-cluster/kubeadm/configure-cgroup-driver/#%E9%85%8D%E7%BD%AE-kubelet-%E7%9A%84-cgroup-%E9%A9%B1%E5%8A%A8">kubeleté…ç½®systemdä½œcgroupé©±åŠ¨</a>ï¼›</p>
</blockquote>
<p>1.22åŠä¹‹å<code>kubeadm init</code>é»˜è®¤ä½¿ç”¨ <code>systemd</code> ä½œä¸º kubelet çš„ cgroup é©±åŠ¨ï¼Œè€Œä¸æ˜¯ <code>cgroupfs</code>ã€‚è¿™é‡Œé¡ºæ‰‹åŠ ä¸Š<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">é˜¿é‡Œäº‘ docker é•œåƒæº</a>ã€‚</p>
<pre><code class="language-shell"># dockeré…ç½®systemdä½œcgroupé©±åŠ¨ã€‚
# å¦åˆ™kubeadm initæŠ¥é”™dial tcp 127.0.0.1:10248: connect: connection refused
# å¦å¤–é…ç½®äº†æ—¥å¿—ã€é•œåƒæºã€å…è¯ä¹¦éªŒè¯ä»“åº“
cat &lt;&lt;EOF | tee /etc/docker/daemon.json
{
  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],
  &quot;log-driver&quot;: &quot;json-file&quot;,
  &quot;log-opts&quot;: {
    &quot;max-size&quot;: &quot;100m&quot;
  },
  &quot;storage-driver&quot;: &quot;overlay2&quot;,
  &quot;registry-mirrors&quot;: [&quot;https://ohm5orzk.mirror.aliyuncs.com&quot;],
  &quot;insecure-registries&quot;: [&quot;registry.aliyuncs.com&quot;] # [&quot;192.168.xxx.xxx:5000&quot;,&quot;registry.aliyuncs.com&quot;]
}
EOF
# å¯ç”¨é…ç½®å¹¶é‡å¯docker
systemctl daemon-reload &amp;&amp; systemctl restart docker

# kubeleté…ç½®systemdä½œcgroupé©±åŠ¨ã€‚1.23ç‰ˆæœ¬é»˜è®¤ä¸ºsystemdï¼Œæ— éœ€é…ç½®
</code></pre>
<h3 id="æ§åˆ¶å¹³é¢å‡†å¤‡"><a class="header" href="#æ§åˆ¶å¹³é¢å‡†å¤‡">æ§åˆ¶å¹³é¢å‡†å¤‡</a></h3>
<pre><code class="language-shell"># è®¾ç½® hostname
hostnamectl set-hostname 192.168.31.11

# ä¸»èŠ‚ç‚¹æ·»åŠ æœ¬æœº DNS æ˜ å°„
sed -i '$a192.168.31.11 kubecpe' /etc/hosts
</code></pre>
<h3 id="æ•°æ®å¹³é¢å‡†å¤‡"><a class="header" href="#æ•°æ®å¹³é¢å‡†å¤‡">æ•°æ®å¹³é¢å‡†å¤‡</a></h3>
<pre><code class="language-shell"># è®¾ç½® hostname
hostnamectl set-hostname 192.168.31.15
</code></pre>
<h2 id="é›†ç¾¤åˆ›å»º"><a class="header" href="#é›†ç¾¤åˆ›å»º">é›†ç¾¤åˆ›å»º</a></h2>
<p>å‡†å¤‡3å°å®Œæˆå®‰è£…çš„æœºå™¨</p>
<h3 id="kubeadm"><a class="header" href="#kubeadm">kubeadm</a></h3>
<p><a href="https://kubernetes.io/zh/docs/reference/setup-tools/kubeadm/">kubeadm å‚è€ƒæŒ‡å—</a>ã€‚</p>
<h4 id="æ§åˆ¶å¹³é¢"><a class="header" href="#æ§åˆ¶å¹³é¢">æ§åˆ¶å¹³é¢</a></h4>
<p><a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2%E8%8A%82%E7%82%B9">åˆå§‹åŒ–æ§åˆ¶å¹³é¢èŠ‚ç‚¹</a>ã€‚æ³¨æ„è¦å†æ¬¡è¿è¡Œ <code>kubeadm init</code>ï¼Œå¿…é¡»é¦–å…ˆ<a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#tear-down">å¸è½½é›†ç¾¤</a>ã€‚å¦‚æœæ˜¯érootç”¨æˆ·</p>
<pre><code class="language-shell"># --apiserver-advertise-address è®¾ç½® master ip
# --image-repository æŒ‡å®šé˜¿é‡Œäº‘é•œåƒä»“åº“åœ°å€ï¼Œå› ä¸ºé»˜è®¤æ‹‰å–é•œåƒåœ°å€ k8s.gcr.io å›½å†…æ— æ³•è®¿é—®ï¼›
$ kubeadm init \
--node-name 192.168.31.11 \
--control-plane-endpoint=kubecpe \
--apiserver-advertise-address=192.168.31.11 \
--pod-network-cidr=10.244.0.0/16 \
--image-repository registry.aliyuncs.com/google_containers

# åˆ›å»ºæˆåŠŸåå¾—åˆ°å¦‚ä¸‹æ“ä½œæç¤º
......
Your Kubernetes control-plane has initialized successfully!

# å¦‚ä½•å¼€å§‹ä½¿ç”¨é›†ç¾¤ï¼ˆkubectlï¼‰
To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

Alternatively, if you are the root user, you can run:

  export KUBECONFIG=/etc/kubernetes/admin.conf

# å¦‚ä½•å®‰è£… pod ç½‘ç»œ
You should now deploy a pod network to the cluster.
Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

# å¦‚ä½•æ·»åŠ æ§åˆ¶å¹³é¢èŠ‚ç‚¹
You can now join any number of control-plane nodes by copying certificate authorities
and service account keys on each node and then running the following as root:

  kubeadm join kubecpe:6443 --token nhn70c.ck1r8ceu4j4pq3ep \
        --discovery-token-ca-cert-hash sha256:55b9644fc941d4928f40baa30a700973cf375b826fdb8e00012797cdbe0c90c1 \
        --control-plane

# å¦‚ä½•æ·»åŠ å·¥ä½œèŠ‚ç‚¹
Then you can join any number of worker nodes by running the following on each as root:

kubeadm join kubecpe:6443 --token nhn70c.ck1r8ceu4j4pq3ep \
        --discovery-token-ca-cert-hash sha256:55b9644fc941d4928f40baa30a700973cf375b826fdb8e00012797cdbe0c90c1
</code></pre>
<h4 id="ä½¿ç”¨é›†ç¾¤"><a class="header" href="#ä½¿ç”¨é›†ç¾¤">ä½¿ç”¨é›†ç¾¤</a></h4>
<p>å¤åˆ¶ /etc/kubernetes/admin.conf åˆ° $HOME/.kube/config å³å¯ä½¿ç”¨ kubectl</p>
<pre><code class="language-shell">mkdir ~/.kube
cp -i /etc/kubernetes/admin.conf ~/.kube/config
chown $(id -u):$(id -g) ~/.kube/config
</code></pre>
<h4 id="pod-ç½‘ç»œ"><a class="header" href="#pod-ç½‘ç»œ">pod ç½‘ç»œ</a></h4>
<p><a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#pod-network">å®‰è£… pod ç½‘ç»œ</a>ã€‚ä» <a href="https://github.com/flannel-io/flannel/blob/v0.15.1/Documentation/kube-flannel.yml">flannel github</a> ä¸Šå¤åˆ¶ä¸‹æ¥ä½¿ç”¨ï¼Œä½¿ç”¨ -f ç›´æ¥æŒ‡å®šæˆ–è€…ä½¿ç”¨ wget ä¸‹è½½å -f æŒ‡å®šï¼Œéƒ½ä¼šå‡ºç° yaml è§£æé”™è¯¯</p>
<p>å¦‚æœ‰éœ€è¦è¯·<a href="https://huangzhongde.cn/istio/Chapter6/Chapter6-8.html">é…ç½®ç½‘å¡</a>ã€‚</p>
<pre><code class="language-shell"># éƒ¨ç½² kube-flannel
kubectl apply -f /mnt/share/kube-flannel.yaml
</code></pre>
<h4 id="å·¥ä½œèŠ‚ç‚¹"><a class="header" href="#å·¥ä½œèŠ‚ç‚¹">å·¥ä½œèŠ‚ç‚¹</a></h4>
<p>é›†ç¾¤<a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#join-nodes">åŠ å…¥èŠ‚ç‚¹</a>ã€‚å¦‚æœå‰é¢æç¤ºçš„ token å’Œ hash å·²ç»æ‰¾ä¸åˆ°äº†ï¼Œå¯ä»¥åœ¨æ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¸ŠæŸ¥çœ‹ token å’Œ hash</p>
<pre><code class="language-shell"># æŸ¥çœ‹ token åˆ—è¡¨
kubeadm token list
# æˆ–è€…åˆ›å»ºæ–°çš„ token
kubeadm token create
# æŸ¥çœ‹ CA å…¬é’¥çš„å“ˆå¸Œå€¼
openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed 's/^.* //'
</code></pre>
<p>ç„¶ååœ¨å·¥ä½œèŠ‚ç‚¹ä¸Šé€šè¿‡ <code>kubeadm join --token &lt;token&gt; &lt;control-plane-host&gt;:&lt;control-plane-port&gt; --discovery-token-ca-cert-hash sha256:&lt;hash&gt;</code> åŠ å…¥é›†ç¾¤ã€‚</p>
<pre><code class="language-shell"># å·¥ä½œèŠ‚ç‚¹æ·»åŠ æ§åˆ¶å¹³é¢èŠ‚ç‚¹çš„ DNS æ˜ å°„
sed -i '$a192.168.31.11 kubecpe' /etc/hosts
# åŠ å…¥é›†ç¾¤
kubeadm join kubecpe:6443 \
--node-name 192.168.31.11 \
--token st4khy.2j4qmbuge5mh1d76 \
--discovery-token-ca-cert-hash sha256:55b9644fc941d4928f40baa30a700973cf375b826fdb8e00012797cdbe0c90c1
</code></pre>
<h4 id="èŠ‚ç‚¹åˆ é™¤"><a class="header" href="#èŠ‚ç‚¹åˆ é™¤">èŠ‚ç‚¹åˆ é™¤</a></h4>
<blockquote>
<p>èŠ‚ç‚¹æ¸…ç†</p>
</blockquote>
<p>å…ˆåœ¨èŠ‚ç‚¹ä¸Šé‡ç½® kubeadm å®‰è£…çš„çŠ¶æ€ï¼Œç„¶åé€šè¿‡ kubectl åˆ é™¤èŠ‚ç‚¹å³å¯ã€‚ä¸»èŠ‚ç‚¹åªéœ€è°ƒç”¨ <code>kubeadm reset</code> ä¼šè¿›è¡Œå°½åŠ›è€Œä¸ºçš„æ¸…ç†</p>
<pre><code class="language-shell"># ä½¿èŠ‚ç‚¹ä¸è°ƒåº¦
kubectl drain &lt;node name&gt; --delete-emptydir-data --force --ignore-daemonsets
kubeadm reset
kubectl delete node &lt;node_name&gt;
</code></pre>
<h4 id="ç½‘ç»œå¸è½½"><a class="header" href="#ç½‘ç»œå¸è½½">ç½‘ç»œå¸è½½</a></h4>
<p>é‡ç½®è¿‡ç¨‹ <code>kubeadm reset</code> ä¸ä¼šé‡ç½®æˆ–æ¸…é™¤ iptables è§„åˆ™æˆ– IPVS è¡¨</p>
<pre><code class="language-shell"># iptablesæ¸…ç†
iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X
</code></pre>
<pre><code class="language-shell"># IPVS æ¸…ç†
ipvsadm -C
</code></pre>
<p>ç½‘å¡æ¸…ç†</p>
<pre><code class="language-shell"># flannelï¼Œæ¸…ç†å®Œéœ€é‡å¯ kubelet
kubectl delete -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
ifconfig cni0 down
ip link delete cni0
ifconfig flannel.1 down
ip link delete flannel.1
rm -rf /var/lib/cni/
rm -f /etc/cni/net.d/*
systemctl restart kubelet
</code></pre>
<h3 id="æœ€ä½³å®è·µ"><a class="header" href="#æœ€ä½³å®è·µ">æœ€ä½³å®è·µ</a></h3>
<h4 id="tls-è¯ä¹¦å’Œç§˜é’¥"><a class="header" href="#tls-è¯ä¹¦å’Œç§˜é’¥">TLS è¯ä¹¦å’Œç§˜é’¥</a></h4>
<p>å®‰è£… CFSSL</p>
<pre><code class="language-shell">$ go get -u github.com/cloudflare/cfssl/cmd/...
$ ls $GOPATH/bin/cfssl*
/root/go/path/bin/cfssl         /root/go/path/bin/cfssl-certinfo  /root/go/path/bin/cfssl-newkey
/root/go/path/bin/cfssl-bundle  /root/go/path/bin/cfssljson       /root/go/path/bin/cfssl-scan
</code></pre>
<h5 id="ca-è¯ä¹¦"><a class="header" href="#ca-è¯ä¹¦">CA è¯ä¹¦</a></h5>
<p>åˆ›å»º CA é…ç½®æ–‡ä»¶ã€‚</p>
<pre><code class="language-shell">$ cfssl print-defaults config &gt; config.json
$ cfssl print-defaults csr &gt; csr.json

# æ ¹æ® config.json æ–‡ä»¶çš„æ ¼å¼åˆ›å»ºå¦‚ä¸‹çš„ ca-config.json æ–‡ä»¶ï¼Œè¿‡æœŸæ—¶é—´è®¾ç½®æˆäº† 87600h
$ cat &gt; ca-config.json &lt;&lt;EOF
{
  &quot;signing&quot;: {
    &quot;default&quot;: {
      &quot;expiry&quot;: &quot;87600h&quot;
    },
    &quot;profiles&quot;: {
      &quot;kubernetes&quot;: {
        &quot;usages&quot;: [
            &quot;signing&quot;,
            &quot;key encipherment&quot;,
            &quot;server auth&quot;,
            &quot;client auth&quot;
        ],
        &quot;expiry&quot;: &quot;87600h&quot;
      }
    }
  }
}
EOF
</code></pre>
<p>å­—æ®µè¯´æ˜ï¼š</p>
<ul>
<li><code>ca-config.json</code>ï¼šå¯ä»¥å®šä¹‰å¤šä¸ª profilesï¼Œåˆ†åˆ«æŒ‡å®šä¸åŒçš„è¿‡æœŸæ—¶é—´ã€ä½¿ç”¨åœºæ™¯ç­‰å‚æ•°ï¼›åç»­åœ¨ç­¾åè¯ä¹¦æ—¶ä½¿ç”¨æŸä¸ª profileï¼›</li>
<li><code>signing</code>ï¼šè¡¨ç¤ºè¯¥è¯ä¹¦å¯ç”¨äºç­¾åå…¶å®ƒè¯ä¹¦ï¼›ç”Ÿæˆçš„ ca.pem è¯ä¹¦ä¸­ <code>CA=TRUE</code>ï¼›</li>
<li><code>server auth</code>ï¼šè¡¨ç¤ºclientå¯ä»¥ç”¨è¯¥ CA å¯¹serveræä¾›çš„è¯ä¹¦è¿›è¡ŒéªŒè¯ï¼›</li>
<li><code>client auth</code>ï¼šè¡¨ç¤ºserverå¯ä»¥ç”¨è¯¥CAå¯¹clientæä¾›çš„è¯ä¹¦è¿›è¡ŒéªŒè¯ï¼›</li>
</ul>
<p>åˆ›å»º CA è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶</p>
<pre><code class="language-shell">cat &gt; ca-csr.json &lt;&lt; EOF
&gt; {
&gt;   &quot;CN&quot;: &quot;kubernetes&quot;,
&gt;   &quot;key&quot;: {
&gt;     &quot;algo&quot;: &quot;rsa&quot;,
&gt;     &quot;size&quot;: 2048
&gt;   },
&gt;   &quot;names&quot;: [
&gt;     {
&gt;       &quot;C&quot;: &quot;CN&quot;,
&gt;       &quot;ST&quot;: &quot;BeiJing&quot;,
&gt;       &quot;L&quot;: &quot;BeiJing&quot;,
&gt;       &quot;O&quot;: &quot;k8s&quot;,
&gt;       &quot;OU&quot;: &quot;System&quot;
&gt;     }
&gt;   ],
&gt;     &quot;ca&quot;: {
&gt;        &quot;expiry&quot;: &quot;87600h&quot;
&gt;     }
&gt; }
&gt; EOF
</code></pre>
<p>å­—æ®µè¯´æ˜ï¼š</p>
<ul>
<li>&quot;CN&quot;ï¼š<code>Common Name</code>ï¼Œkube-apiserver ä»è¯ä¹¦ä¸­æå–è¯¥å­—æ®µä½œä¸ºè¯·æ±‚çš„ç”¨æˆ·å (User Name)ï¼›æµè§ˆå™¨ä½¿ç”¨è¯¥å­—æ®µéªŒè¯ç½‘ç«™æ˜¯å¦åˆæ³•ï¼›</li>
<li>&quot;O&quot;ï¼š<code>Organization</code>ï¼Œkube-apiserver ä»è¯ä¹¦ä¸­æå–è¯¥å­—æ®µä½œä¸ºè¯·æ±‚ç”¨æˆ·æ‰€å±çš„ç»„ (Group)ï¼›</li>
</ul>
<p><strong>ç”Ÿæˆ CA è¯ä¹¦å’Œç§é’¥</strong>ã€‚</p>
<pre><code class="language-shell">$ cfssl gencert -initca ca-csr.json | cfssljson -bare ca
$ ls ca*
ca-config.json  ca.csr  ca-csr.json  ca-key.pem  ca.pem
</code></pre>
<h5 id="kubernetes-è¯ä¹¦"><a class="header" href="#kubernetes-è¯ä¹¦">kubernetes è¯ä¹¦</a></h5>
<p>åˆ›å»º kubernetes è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶</p>
<pre><code class="language-shell">$ cat &gt; kubernetes-csr.json &lt;&lt; EOF
&gt; {
&gt;     &quot;CN&quot;: &quot;kubernetes&quot;,
&gt;     &quot;hosts&quot;: [
&gt;       &quot;127.0.0.1&quot;,
&gt;       &quot;172.20.0.112&quot;,
&gt;       &quot;172.20.0.113&quot;,
&gt;       &quot;172.20.0.114&quot;,
&gt;       &quot;172.20.0.115&quot;,
&gt;       &quot;10.254.0.1&quot;,
&gt;       &quot;kubernetes&quot;,
&gt;       &quot;kubernetes.default&quot;,
&gt;       &quot;kubernetes.default.svc&quot;,
&gt;       &quot;kubernetes.default.svc.cluster&quot;,
        &quot;algo&quot;: &quot;rsa&quot;,
&gt;       &quot;kubernetes.default.svc.cluster.local&quot;
&gt;     ],
&gt;     &quot;key&quot;: {
&gt;         &quot;algo&quot;: &quot;rsa&quot;,
&gt;         &quot;size&quot;: 2048
&gt;     },
&gt;     &quot;names&quot;: [
&gt;         {
&gt;             &quot;C&quot;: &quot;CN&quot;,
&gt;             &quot;ST&quot;: &quot;BeiJing&quot;,
&gt;             &quot;L&quot;: &quot;BeiJing&quot;,
&gt;             &quot;O&quot;: &quot;k8s&quot;,
&gt;             &quot;OU&quot;: &quot;System&quot;
&gt;         }
&gt;     ]
&gt; }
&gt; EOF
</code></pre>
<ul>
<li>å¦‚æœ hosts å­—æ®µä¸ä¸ºç©ºåˆ™éœ€è¦æŒ‡å®šæˆæƒä½¿ç”¨è¯¥è¯ä¹¦çš„ <strong>IP æˆ–åŸŸååˆ—è¡¨</strong>ï¼Œç”±äºè¯¥è¯ä¹¦åç»­è¢« <code>etcd</code> é›†ç¾¤å’Œ <code>kubernetes master</code> é›†ç¾¤ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸Šé¢åˆ†åˆ«æŒ‡å®šäº† <code>etcd</code> é›†ç¾¤ã€<code>kubernetes master</code> é›†ç¾¤çš„ä¸»æœº IP å’Œ <strong><code>kubernetes</code> æœåŠ¡çš„æœåŠ¡ IP</strong>ï¼ˆä¸€èˆ¬æ˜¯ <code>kube-apiserver</code> æŒ‡å®šçš„ <code>service-cluster-ip-range</code> ç½‘æ®µçš„ç¬¬ä¸€ä¸ªIPï¼Œå¦‚ 10.254.0.1ï¼‰ã€‚</li>
<li>è¿™æ˜¯æœ€å°åŒ–å®‰è£…çš„kubernetesé›†ç¾¤ï¼ŒåŒ…æ‹¬ä¸€ä¸ªç§æœ‰é•œåƒä»“åº“ï¼Œä¸‰ä¸ªèŠ‚ç‚¹çš„kubernetesé›†ç¾¤ï¼Œä»¥ä¸Šç‰©ç†èŠ‚ç‚¹çš„IPä¹Ÿå¯ä»¥æ›´æ¢ä¸ºä¸»æœºåã€‚</li>
</ul>
<p><strong>ç”Ÿæˆ kubernetes è¯ä¹¦å’Œç§é’¥</strong></p>
<pre><code class="language-shell">$ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes
$ ls kubernetes*
kubernetes.csr  kubernetes-csr.json  kubernetes-key.pem  kubernetes.pem
</code></pre>
<h5 id="admin-è¯ä¹¦"><a class="header" href="#admin-è¯ä¹¦">admin è¯ä¹¦</a></h5>
<p>åˆ›å»º admin è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶</p>
<pre><code class="language-shell">$ cat &gt; admin-csr.json &lt;&lt; EOF
&gt; {
&gt;   &quot;CN&quot;: &quot;admin&quot;,
&gt;   &quot;hosts&quot;: [],
&gt;   &quot;key&quot;: {
&gt;     &quot;algo&quot;: &quot;rsa&quot;,
&gt;     &quot;size&quot;: 2048
&gt;   },
&gt;   &quot;names&quot;: [
&gt;     {
&gt;       &quot;C&quot;: &quot;CN&quot;,
&gt;       &quot;ST&quot;: &quot;BeiJing&quot;,
&gt;       &quot;L&quot;: &quot;BeiJing&quot;,
&gt;       &quot;O&quot;: &quot;system:masters&quot;,
&gt;       &quot;OU&quot;: &quot;System&quot;
&gt;     }
&gt;   ]
&gt; }
&gt; EOF
</code></pre>
<ul>
<li>åç»­ <code>kube-apiserver</code> ä½¿ç”¨ <code>RBAC</code> å¯¹å®¢æˆ·ç«¯(å¦‚ <code>kubelet</code>ã€<code>kube-proxy</code>ã€<code>Pod</code>)è¯·æ±‚è¿›è¡Œæˆæƒï¼›</li>
<li><code>kube-apiserver</code> é¢„å®šä¹‰äº†ä¸€äº› <code>RBAC</code> ä½¿ç”¨çš„ <code>RoleBindings</code>ï¼Œå¦‚ <code>cluster-admin</code> å°† Group <code>system:masters</code> ä¸ Role <code>cluster-admin</code> ç»‘å®šï¼Œè¯¥ Role æˆäºˆäº†è°ƒç”¨<code>kube-apiserver</code> çš„<strong>æ‰€æœ‰ API</strong>çš„æƒé™ï¼›</li>
<li>O æŒ‡å®šè¯¥è¯ä¹¦çš„ Group ä¸º <code>system:masters</code>ï¼Œ<code>kubelet</code> ä½¿ç”¨è¯¥è¯ä¹¦è®¿é—® <code>kube-apiserver</code> æ—¶ ï¼Œç”±äºè¯ä¹¦è¢« CA ç­¾åï¼Œæ‰€ä»¥è®¤è¯é€šè¿‡ï¼ŒåŒæ—¶ç”±äºè¯ä¹¦ç”¨æˆ·ç»„ä¸ºç»è¿‡é¢„æˆæƒçš„ <code>system:masters</code>ï¼Œæ‰€ä»¥è¢«æˆäºˆè®¿é—®æ‰€æœ‰ API çš„æƒé™ï¼›</li>
</ul>
<p><strong>ç”Ÿæˆ admin è¯ä¹¦å’Œç§é’¥</strong></p>
<pre><code class="language-shell">$ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin
$ ls admin*
admin.csr  admin-csr.json  admin-key.pem  admin.pem
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šè¿™ä¸ªadmin è¯ä¹¦ï¼Œæ˜¯å°†æ¥ç”Ÿæˆç®¡ç†å‘˜ç”¨çš„kube config é…ç½®æ–‡ä»¶ç”¨çš„ï¼Œç°åœ¨æˆ‘ä»¬ä¸€èˆ¬å»ºè®®ä½¿ç”¨RBAC æ¥å¯¹kubernetes è¿›è¡Œè§’è‰²æƒé™æ§åˆ¶ï¼Œ kubernetes å°†è¯ä¹¦ä¸­çš„CN å­—æ®µ ä½œä¸ºUserï¼Œ O å­—æ®µä½œä¸º Groupï¼ˆå…·ä½“å‚è€ƒ<a href="https://jimmysong.io/kubernetes-handbook/guide/authentication.html"> Kubernetesä¸­çš„ç”¨æˆ·ä¸èº«ä»½è®¤è¯æˆæƒ</a>ä¸­ X509 Client Certs ä¸€æ®µï¼‰ã€‚</p>
<p>åœ¨æ­å»ºå®Œ kubernetes é›†ç¾¤åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤: <code>kubectl get clusterrolebinding cluster-admin -o yaml</code> ,æŸ¥çœ‹åˆ° <code>clusterrolebinding cluster-admin</code> çš„ subjects çš„ kind æ˜¯ Groupï¼Œname æ˜¯ <code>system:masters</code>ã€‚ <code>roleRef</code> å¯¹è±¡æ˜¯ <code>ClusterRole cluster-admin</code>ã€‚ æ„æ€æ˜¯å‡¡æ˜¯ <code>system:masters Group</code> çš„ user æˆ–è€… <code>serviceAccount</code> éƒ½æ‹¥æœ‰ <code>cluster-admin</code> çš„è§’è‰²ã€‚ å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨ kubectl å‘½ä»¤æ—¶å€™ï¼Œæ‰æ‹¥æœ‰æ•´ä¸ªé›†ç¾¤çš„ç®¡ç†æƒé™ã€‚</p>
<pre><code class="language-yaml">$ kubectl get clusterrolebinding cluster-admin -o yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  annotations:
    rbac.authorization.kubernetes.io/autoupdate: &quot;true&quot;
  creationTimestamp: 2017-04-11T11:20:42Z
  labels:
    kubernetes.io/bootstrapping: rbac-defaults
  name: cluster-admin
  resourceVersion: &quot;52&quot;
  selfLink: /apis/rbac.authorization.k8s.io/v1/clusterrolebindings/cluster-admin
  uid: e61b97b2-1ea8-11e7-8cd7-f4e9d49f8ed0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: Group
  name: system:masters
</code></pre>
<h5 id="kube-proxy-è¯ä¹¦"><a class="header" href="#kube-proxy-è¯ä¹¦">kube-proxy è¯ä¹¦</a></h5>
<p>åˆ›å»º kube-proxy è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶</p>
<pre><code class="language-shell">$ cat &gt; kube-proxy-csr.json &lt;&lt; EOF
&gt; {
&gt;   &quot;CN&quot;: &quot;system:kube-proxy&quot;,
&gt;   &quot;hosts&quot;: [],
&gt;   &quot;key&quot;: {
&gt;     &quot;algo&quot;: &quot;rsa&quot;,
&gt;     &quot;size&quot;: 2048
&gt;   },
&gt;   &quot;names&quot;: [
&gt;     {
&gt;       &quot;C&quot;: &quot;CN&quot;,
&gt;       &quot;ST&quot;: &quot;BeiJing&quot;,
&gt;       &quot;L&quot;: &quot;BeiJing&quot;,
&gt;       &quot;O&quot;: &quot;k8s&quot;,
&gt;       &quot;OU&quot;: &quot;System&quot;
&gt;     }
&gt;   ]
&gt; }
&gt; EOF
</code></pre>
<ul>
<li>CN æŒ‡å®šè¯¥è¯ä¹¦çš„ User ä¸º <code>system:kube-proxy</code>ï¼›</li>
<li><code>kube-apiserver</code> é¢„å®šä¹‰çš„ RoleBinding <code>system:node-proxier</code> å°†User <code>system:kube-proxy</code> ä¸ Role <code>system:node-proxier</code> ç»‘å®šï¼Œè¯¥ Role æˆäºˆäº†è°ƒç”¨ <code>kube-apiserver</code> Proxy ç›¸å…³ API çš„æƒé™ï¼›</li>
</ul>
<p>ç”Ÿæˆ kube-proxy å®¢æˆ·ç«¯è¯ä¹¦å’Œç§é’¥</p>
<pre><code class="language-shell">$ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes  kube-proxy-csr.json | cfssljson -bare kube-proxy
$ ls kube-proxy*
</code></pre>
<h5 id="æ ¡éªŒè¯ä¹¦"><a class="header" href="#æ ¡éªŒè¯ä¹¦">æ ¡éªŒè¯ä¹¦</a></h5>
<h6 id="ä½¿ç”¨-openssl"><a class="header" href="#ä½¿ç”¨-openssl">ä½¿ç”¨ openssl</a></h6>
<p>ä»¥ Kubernetes è¯ä¹¦ä¸ºä¾‹ï¼Œä½¿ç”¨ openssl å‘½ä»¤è¯»å–è¯ä¹¦ä¿¡æ¯</p>
<ul>
<li>ç¡®è®¤ <code>Issuer</code> å­—æ®µçš„å†…å®¹å’Œ <code>ca-csr.json</code> ä¸€è‡´ï¼›</li>
<li>ç¡®è®¤ <code>Subject</code> å­—æ®µçš„å†…å®¹å’Œ <code>kubernetes-csr.json</code> ä¸€è‡´ï¼›</li>
<li>ç¡®è®¤ <code>X509v3 Subject Alternative Name</code> å­—æ®µçš„å†…å®¹å’Œ <code>kubernetes-csr.json</code> ä¸€è‡´ï¼›</li>
<li>ç¡®è®¤ <code>X509v3 Key Usageã€Extended Key Usage</code> å­—æ®µçš„å†…å®¹å’Œ <code>ca-config.json</code> ä¸­ <code>kubernetes</code> profile ä¸€è‡´ï¼›</li>
</ul>
<pre><code class="language-shell">$ openssl x509  -noout -text -in  kubernetes.pem
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            03:0e:b4:83:5e:6d:02:fa:bf:62:21:aa:37:47:f1:c4:88:f4:8a:0c
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = CN, ST = BeiJing, L = BeiJing, O = k8s, OU = System, CN = kubernetes
        Validity
            Not Before: Mar 12 12:04:00 2022 GMT
            Not After : Mar  9 12:04:00 2032 GMT
        Subject: C = CN, ST = BeiJing, L = BeiJing, O = k8s, OU = System, CN = kubernetes
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: (2048 bit)
                Modulus:
                    ......
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Server Authentication, TLS Web Client Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                B7:15:10:43:1B:E1:53:B0:6A:12:56:5B:A5:CD:EF:77:E4:A0:79:F4
            X509v3 Subject Alternative Name:
                DNS:kubernetes, DNS:kubernetes.default, DNS:kubernetes.default.svc, DNS:kubernetes.default.svc.cluster, DNS:kubernetes.default.svc.cluster.local, IP Address:127.0.0.1, IP Address:172.20.0.112, IP Address:172.20.0.113, IP Address:172.20.0.114, IP Address:172.20.0.115, IP Address:10.254.0.1
    Signature Algorithm: sha256WithRSAEncryption
         ......
</code></pre>
<h6 id="ä½¿ç”¨cfssl-certinfo"><a class="header" href="#ä½¿ç”¨cfssl-certinfo">ä½¿ç”¨cfssl-certinfo</a></h6>
<pre><code class="language-shell">cfssl-certinfo -cert kubernetes.pem
{
  &quot;subject&quot;: {
    &quot;common_name&quot;: &quot;kubernetes&quot;,
    &quot;country&quot;: &quot;CN&quot;,
    &quot;organization&quot;: &quot;k8s&quot;,
    &quot;organizational_unit&quot;: &quot;System&quot;,
    &quot;locality&quot;: &quot;BeiJing&quot;,
    &quot;province&quot;: &quot;BeiJing&quot;,
    &quot;names&quot;: [
      &quot;CN&quot;,
      &quot;BeiJing&quot;,
      &quot;BeiJing&quot;,
      &quot;k8s&quot;,
      &quot;System&quot;,
      &quot;kubernetes&quot;
    ]
  },
  &quot;issuer&quot;: {
    &quot;common_name&quot;: &quot;kubernetes&quot;,
    &quot;country&quot;: &quot;CN&quot;,
    &quot;organization&quot;: &quot;k8s&quot;,
    &quot;organizational_unit&quot;: &quot;System&quot;,
    &quot;locality&quot;: &quot;BeiJing&quot;,
    &quot;province&quot;: &quot;BeiJing&quot;,
    &quot;names&quot;: [
      &quot;CN&quot;,
      &quot;BeiJing&quot;,
      &quot;BeiJing&quot;,
      &quot;k8s&quot;,
      &quot;System&quot;,
      &quot;kubernetes&quot;
    ]
  },
  &quot;serial_number&quot;: &quot;17454907659222183176468532411310969421540133388&quot;,
  &quot;sans&quot;: [
    &quot;kubernetes&quot;,
    &quot;kubernetes.default&quot;,
    &quot;kubernetes.default.svc&quot;,
    &quot;kubernetes.default.svc.cluster&quot;,
    &quot;kubernetes.default.svc.cluster.local&quot;,
    &quot;127.0.0.1&quot;,
    &quot;172.20.0.112&quot;,
    &quot;172.20.0.113&quot;,
    &quot;172.20.0.114&quot;,
    &quot;172.20.0.115&quot;,
    &quot;10.254.0.1&quot;
  ],
  &quot;not_before&quot;: &quot;2022-03-12T12:04:00Z&quot;,
  &quot;not_after&quot;: &quot;2032-03-09T12:04:00Z&quot;,
  &quot;sigalg&quot;: &quot;SHA256WithRSA&quot;,
  &quot;authority_key_id&quot;: &quot;&quot;,
  &quot;subject_key_id&quot;: &quot;B7:15:10:43:1B:E1:53:B0:6A:12:56:5B:A5:CD:EF:77:E4:A0:79:F4&quot;,
  &quot;pem&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIEajCCA1KgAwIBAgIUAw60g15tAvq/YiGqN0fxxIj0igwwDQYJKoZIhvcNAQEL\nBQAwZTELMAkGA1UEBhMCQ04xEDAOBgNVBAgTB0JlaUppbmcxEDAOBgNVBAcTB0Jl\naUppbmcxDDAKBgNVBAoTA2s4czEPMA0GA1UECxMGU3lzdGVtMRMwEQYDVQQDEwpr\ndWJlcm5ldGVzMB4XDTIyMDMxMjEyMDQwMFoXDTMyMDMwOTEyMDQwMFowZTELMAkG\nA1UEBhMCQ04xEDAOBgNVBAgTB0JlaUppbmcxEDAOBgNVBAcTB0JlaUppbmcxDDAK\nBgNVBAoTA2s4czEPMA0GA1UECxMGU3lzdGVtMRMwEQYDVQQDEwprdWJlcm5ldGVz\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3QrEXpJnjVNsYnFGnu4f\nJG99y/P49uL0VTEZP4+6X/NRN1Fq9clX8acDHQcYBPud6OSI2Lvah9hxKQTpmIIQ\nky2lEnA64c9BDU5x0CUP5UOzwryjddFshHfvNOg7dySR3hzOKiKac31RKCtOo3OB\nlVctX+ksm1dAsTuGoAvYXKTl2fbR6p+Ew7tkMjbtaghXS9MXVy3RN1t7G3X9Xj9U\ndHnfdTCtTVxJF6kRrOBuP3ad+YDj6QAk8jXKefkFzfezj+w1g1zPJXcTtSko/YiH\n9A0lfiKxiv+6RGoXWQRnMT1J2Or8sKP0yWb0qLkk/+jINCiNulLL+mDQrEVlSSn3\ncwIDAQABo4IBEDCCAQwwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUF\nBwMBBggrBgEFBQcDAjAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBS3FRBDG+FTsGoS\nVlulze935KB59DCBrQYDVR0RBIGlMIGiggprdWJlcm5ldGVzghJrdWJlcm5ldGVz\nLmRlZmF1bHSCFmt1YmVybmV0ZXMuZGVmYXVsdC5zdmOCHmt1YmVybmV0ZXMuZGVm\nYXVsdC5zdmMuY2x1c3RlcoIka3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVy\nLmxvY2FshwR/AAABhwSsFABwhwSsFABxhwSsFAByhwSsFABzhwQK/gABMA0GCSqG\nSIb3DQEBCwUAA4IBAQAJTaKt98jCvsRo2vq9RvK732UO4tgYdhyAcQTREvsEyjdT\nYlA85xix0I9j5MlBgyfplQLCIobGjjdmkIdVcJsciPaqRdCjurHkDF5pBs4m/qlr\nfhxjEjZr36aT3/taq5xUA//TkCTb9p8Ijm+3AMdPGxovXE/TokEYcXDNasaVYsLY\naBxKDv3Bymwv9RIzPDrcNnn7llsCba6IX+L8u3TB4GIOxv7yH6XwVhqAFKh1yXUZ\n6H8Wky5z8l91virnRBfi3y4jJsl/odIznp16We8VnWCA36eTzBwOOEZiU3MvlPYc\nei7FKCGN5U3ZwwLsTMH2WzWX+Zw+dZGA97FmDYnX\n-----END CERTIFICATE-----\n&quot;
}
</code></pre>
<h5 id="é¢å‘è¯ä¹¦"><a class="header" href="#é¢å‘è¯ä¹¦">é¢å‘è¯ä¹¦</a></h5>
<p>å°†ç”Ÿæˆçš„è¯ä¹¦å’Œç§˜é’¥æ–‡ä»¶ï¼ˆåç¼€åä¸º<code>.pem</code>ï¼‰æ‹·è´åˆ°æ‰€æœ‰ï¼ˆéœ€è¦çš„ï¼‰æœºå™¨ï¼ˆåŒ…æ‹¬å½“å‰ï¼‰çš„ <code>/etc/kubernetes/ssl</code> ç›®å½•ä¸‹å¤‡ç”¨</p>
<pre><code class="language-shell">mkdir -p /etc/kubernetes/ssl &amp;&amp; cp *.pem /etc/kubernetes/ssl
</code></pre>
<h4 id="kubelet"><a class="header" href="#kubelet">kubelet</a></h4>
<pre><code class="language-shell">export KUBE_APISERVER=&quot;https://kubecpe:6443&quot;

# è®¾ç½®é›†ç¾¤å‚æ•°
kubectl config set-cluster kubernetes \
  --certificate-authority=/etc/kubernetes/ssl/ca.pem \
  --embed-certs=true \
  --server=${KUBE_APISERVER}
# è®¾ç½®å®¢æˆ·ç«¯è®¤è¯å‚æ•°
kubectl config set-credentials admin \
  --client-certificate=/etc/kubernetes/ssl/admin.pem \
  --embed-certs=true \
  --client-key=/etc/kubernetes/ssl/admin-key.pem
# è®¾ç½®ä¸Šä¸‹æ–‡å‚æ•°
kubectl config set-context kubernetes \
  --cluster=kubernetes \
  --user=admin
# è®¾ç½®é»˜è®¤ä¸Šä¸‹æ–‡
kubectl config use-context kubernetes
</code></pre>
<ul>
<li><code>admin.pem</code> è¯ä¹¦ OU å­—æ®µå€¼ä¸º <code>system:masters</code>ï¼Œ<code>kube-apiserver</code> é¢„å®šä¹‰çš„ RoleBinding <code>cluster-admin</code> å°† Group <code>system:masters</code> ä¸ Role <code>cluster-admin</code> ç»‘å®šï¼Œè¯¥ Role æˆäºˆäº†è°ƒç”¨<code>kube-apiserver</code> ç›¸å…³ API çš„æƒé™ï¼›</li>
<li>ç”Ÿæˆçš„ kubeconfig è¢«ä¿å­˜åˆ° <code>~/.kube/config</code> æ–‡ä»¶ï¼›</li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong><code>~/.kube/config</code>æ–‡ä»¶æ‹¥æœ‰å¯¹è¯¥é›†ç¾¤çš„æœ€é«˜æƒé™ï¼Œè¯·å¦¥å–„ä¿ç®¡ã€‚</p>
<h4 id="kubeconfig"><a class="header" href="#kubeconfig">kubeconfig</a></h4>
<h5 id="tls-bootstrapping-token"><a class="header" href="#tls-bootstrapping-token">TLS Bootstrapping Token</a></h5>
<p>Tokenå¯ä»¥æ˜¯ä»»æ„çš„åŒ…å«128 bitçš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨å®‰å…¨çš„éšæœºæ•°å‘ç”Ÿå™¨ç”Ÿæˆã€‚</p>
<pre><code class="language-shell">export BOOTSTRAP_TOKEN=$(head -c 16 /dev/urandom | od -An -t x | tr -d ' ')

cat &gt; token.csv &lt;&lt;EOF
${BOOTSTRAP_TOKEN},kubelet-bootstrap,10001,&quot;system:kubelet-bootstrap&quot;
EOF

# æ£€æŸ¥ token.csv æ–‡ä»¶ï¼Œç¡®è®¤å…¶ä¸­çš„ ${BOOTSTRAP_TOKEN} ç¯å¢ƒå˜é‡å·²ç»è¢«çœŸå®çš„å€¼æ›¿æ¢
cat token.csv
c16e2aa67b2d10569d68ee176af17017,kubelet-bootstrap,10001,&quot;system:kubelet-bootstrap&quot;
</code></pre>
<p><strong>BOOTSTRAP_TOKEN</strong> å°†è¢«å†™å…¥åˆ° kube-apiserver ä½¿ç”¨çš„ token.csv æ–‡ä»¶å’Œ kubelet ä½¿ç”¨çš„ <code>bootstrap.kubeconfig</code> æ–‡ä»¶ï¼Œå¦‚æœåç»­é‡æ–°ç”Ÿæˆäº† BOOTSTRAP_TOKENï¼Œåˆ™éœ€è¦ï¼š</p>
<ol>
<li>æ›´æ–° token.csv æ–‡ä»¶ï¼Œåˆ†å‘åˆ°æ‰€æœ‰æœºå™¨ (master å’Œ nodeï¼‰çš„ /etc/kubernetes/ ç›®å½•ä¸‹ï¼Œåˆ†å‘åˆ°nodeèŠ‚ç‚¹ä¸Šéå¿…éœ€ï¼›</li>
<li>é‡æ–°ç”Ÿæˆ bootstrap.kubeconfig æ–‡ä»¶ï¼Œåˆ†å‘åˆ°æ‰€æœ‰ node æœºå™¨çš„ /etc/kubernetes/ ç›®å½•ä¸‹ï¼›</li>
<li>é‡å¯ kube-apiserver å’Œ kubelet è¿›ç¨‹ï¼›</li>
<li>é‡æ–° approve kubelet çš„ csr è¯·æ±‚ï¼›</li>
</ol>
<pre><code class="language-shell">cp token.csv /etc/kubernetes/
</code></pre>
<h5 id="kubelet-bootstrapping-kubeconfig"><a class="header" href="#kubelet-bootstrapping-kubeconfig">kubelet bootstrapping kubeconfig</a></h5>
<pre><code class="language-shell">cd /etc/kubernetes
export KUBE_APISERVER=&quot;https://kubecpe:6443&quot;

# è®¾ç½®é›†ç¾¤å‚æ•°
kubectl config set-cluster kubernetes \
  --certificate-authority=/etc/kubernetes/ssl/ca.pem \
  --embed-certs=true \
  --server=${KUBE_APISERVER} \
  --kubeconfig=bootstrap.kubeconfig

# è®¾ç½®å®¢æˆ·ç«¯è®¤è¯å‚æ•°
kubectl config set-credentials kubelet-bootstrap \
  --token=${BOOTSTRAP_TOKEN} \
  --kubeconfig=bootstrap.kubeconfig

# è®¾ç½®ä¸Šä¸‹æ–‡å‚æ•°
kubectl config set-context default \
  --cluster=kubernetes \
  --user=kubelet-bootstrap \
  --kubeconfig=bootstrap.kubeconfig

# è®¾ç½®é»˜è®¤ä¸Šä¸‹æ–‡
kubectl config use-context default --kubeconfig=bootstrap.kubeconfig
</code></pre>
<ul>
<li><code>--embed-certs</code> ä¸º <code>true</code> æ—¶è¡¨ç¤ºå°† <code>certificate-authority</code> è¯ä¹¦å†™å…¥åˆ°ç”Ÿæˆçš„ <code>bootstrap.kubeconfig</code> æ–‡ä»¶ä¸­ï¼›</li>
<li>è®¾ç½®å®¢æˆ·ç«¯è®¤è¯å‚æ•°æ—¶<strong>æ²¡æœ‰</strong>æŒ‡å®šç§˜é’¥å’Œè¯ä¹¦ï¼Œåç»­ç”± <code>kube-apiserver</code> è‡ªåŠ¨ç”Ÿæˆï¼›</li>
</ul>
<h5 id="kube-proxy-kubeconfig"><a class="header" href="#kube-proxy-kubeconfig">kube-proxy kubeconfig</a></h5>
<pre><code class="language-shell">export KUBE_APISERVER=&quot;https://172.20.0.113:6443&quot;
# è®¾ç½®é›†ç¾¤å‚æ•°
kubectl config set-cluster kubernetes \
  --certificate-authority=/etc/kubernetes/ssl/ca.pem \
  --embed-certs=true \
  --server=${KUBE_APISERVER} \
  --kubeconfig=kube-proxy.kubeconfig
# è®¾ç½®å®¢æˆ·ç«¯è®¤è¯å‚æ•°
kubectl config set-credentials kube-proxy \
  --client-certificate=/etc/kubernetes/ssl/kube-proxy.pem \
  --client-key=/etc/kubernetes/ssl/kube-proxy-key.pem \
  --embed-certs=true \
  --kubeconfig=kube-proxy.kubeconfig
# è®¾ç½®ä¸Šä¸‹æ–‡å‚æ•°
kubectl config set-context default \
  --cluster=kubernetes \
  --user=kube-proxy \
  --kubeconfig=kube-proxy.kubeconfig
# è®¾ç½®é»˜è®¤ä¸Šä¸‹æ–‡
kubectl config use-context default --kubeconfig=kube-proxy.kubeconfig
</code></pre>
<h5 id="åˆ†å‘-kubeconfig"><a class="header" href="#åˆ†å‘-kubeconfig">åˆ†å‘ kubeconfig</a></h5>
<p>å°†ä¸¤ä¸ª kubeconfig æ–‡ä»¶åˆ†å‘åˆ°æ‰€æœ‰ Node æœºå™¨çš„ <code>/etc/kubernetes/</code> ç›®å½•</p>
<pre><code class="language-shell">cp bootstrap.kubeconfig kube-proxy.kubeconfig /etc/kubernetes/
</code></pre>
<h4 id="etcd"><a class="header" href="#etcd">etcd</a></h4>
<h5 id="å‡†å¤‡-1"><a class="header" href="#å‡†å¤‡-1">å‡†å¤‡</a></h5>
<p>æ·»åŠ  hosts</p>
<pre><code class="language-shell">sed -i '$a192.168.43.201 kubecpe' /etc/hosts
</code></pre>
<h5 id="å®‰è£…-1"><a class="header" href="#å®‰è£…-1">å®‰è£…</a></h5>
<pre><code class="language-shell">wget https://github.com/etcd-io/etcd/releases/download/v3.4.18/etcd-v3.4.18-linux-amd64.tar.gz
tar -xvf etcd-v3.4.18-linux-amd64.tar.gz
mv etcd-v3.1.5-linux-amd64/etcd* /usr/local/bin
</code></pre>
<h5 id="åˆ›å»º-etcd-çš„-systemd-unit-æ–‡ä»¶"><a class="header" href="#åˆ›å»º-etcd-çš„-systemd-unit-æ–‡ä»¶">åˆ›å»º etcd çš„ systemd unit æ–‡ä»¶</a></h5>
<p>åœ¨/usr/lib/systemd/system/ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶etcd.serviceï¼Œå†…å®¹å¦‚ä¸‹ã€‚æ³¨æ„æ›¿æ¢IPåœ°å€ä¸ºä½ è‡ªå·±çš„etcdé›†ç¾¤çš„ä¸»æœºIPã€‚</p>
<pre><code class="language-toml">[Unit]
Description=Etcd Server
After=network.target
After=network-online.target
Wants=network-online.target
Documentation=https://github.com/coreos

[Service]
Type=notify
WorkingDirectory=/var/lib/etcd/
EnvironmentFile=-/etc/etcd/etcd.conf
ExecStart=/usr/local/bin/etcd \
  --name ${ETCD_NAME} \
  --cert-file=/etc/kubernetes/ssl/kubernetes.pem \
  --key-file=/etc/kubernetes/ssl/kubernetes-key.pem \
  --peer-cert-file=/etc/kubernetes/ssl/kubernetes.pem \
  --peer-key-file=/etc/kubernetes/ssl/kubernetes-key.pem \
  --trusted-ca-file=/etc/kubernetes/ssl/ca.pem \
  --peer-trusted-ca-file=/etc/kubernetes/ssl/ca.pem \
  --initial-advertise-peer-urls ${ETCD_INITIAL_ADVERTISE_PEER_URLS} \
  --listen-peer-urls ${ETCD_LISTEN_PEER_URLS} \
  --listen-client-urls ${ETCD_LISTEN_CLIENT_URLS},http://127.0.0.1:2379 \
  --advertise-client-urls ${ETCD_ADVERTISE_CLIENT_URLS} \
  --initial-cluster-token ${ETCD_INITIAL_CLUSTER_TOKEN} \
  --initial-cluster infra1=https://etce01:2380,infra2=https://etce02:2380,infra3=https://etce03:2380 \
  --initial-cluster-state new \
  --data-dir=${ETCD_DATA_DIR}
Restart=on-failure
RestartSec=5
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
</code></pre>
<ul>
<li>æŒ‡å®š <code>etcd</code> çš„å·¥ä½œç›®å½•ä¸º <code>/var/lib/etcd</code>ï¼Œæ•°æ®ç›®å½•ä¸º <code>/var/lib/etcd</code>ï¼Œéœ€åœ¨å¯åŠ¨æœåŠ¡å‰åˆ›å»ºè¿™ä¸ªç›®å½•ï¼Œå¦åˆ™å¯åŠ¨æœåŠ¡çš„æ—¶å€™ä¼šæŠ¥é”™â€œFailed at step CHDIR spawning /usr/bin/etcd: No such file or directoryâ€ï¼›</li>
<li>ä¸ºäº†ä¿è¯é€šä¿¡å®‰å…¨ï¼Œéœ€è¦æŒ‡å®š etcd çš„å…¬ç§é’¥(cert-fileå’Œkey-file)ã€Peers é€šä¿¡çš„å…¬ç§é’¥å’Œ CA è¯ä¹¦(peer-cert-fileã€peer-key-fileã€peer-trusted-ca-file)ã€å®¢æˆ·ç«¯çš„CAè¯ä¹¦ï¼ˆtrusted-ca-fileï¼‰ï¼›</li>
<li>åˆ›å»º <code>kubernetes.pem</code> è¯ä¹¦æ—¶ä½¿ç”¨çš„ <code>kubernetes-csr.json</code> æ–‡ä»¶çš„ <code>hosts</code> å­—æ®µ<strong>åŒ…å«æ‰€æœ‰ etcd èŠ‚ç‚¹çš„IP</strong>ï¼Œå¦åˆ™è¯ä¹¦æ ¡éªŒä¼šå‡ºé”™ï¼›</li>
<li><code>--initial-cluster-state</code> å€¼ä¸º <code>new</code> æ—¶ï¼Œ<code>--name</code> çš„å‚æ•°å€¼å¿…é¡»ä½äº <code>--initial-cluster</code> åˆ—è¡¨ä¸­ï¼›</li>
</ul>
<p>å®Œæ•´ unit æ–‡ä»¶è§ï¼š<a href="https://jimmysong.io/kubernetes-handbook/systemd/etcd.service">etcd.service</a></p>
<p>ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶<code>/etc/etcd/etcd.conf</code>ã€‚</p>
<pre><code class="language-ini"># [member]
ETCD_NAME=infra1
ETCD_DATA_DIR=&quot;/var/lib/etcd&quot;
ETCD_LISTEN_PEER_URLS=&quot;https://172.20.0.113:2380&quot;
ETCD_LISTEN_CLIENT_URLS=&quot;https://172.20.0.113:2379&quot;

#[cluster]
ETCD_INITIAL_ADVERTISE_PEER_URLS=&quot;https://172.20.0.113:2380&quot;
ETCD_INITIAL_CLUSTER_TOKEN=&quot;etcd-cluster&quot;
ETCD_ADVERTISE_CLIENT_URLS=&quot;https://172.20.0.113:2379&quot;
</code></pre>
<h2 id="æ—¶é—´åŒæ­¥"><a class="header" href="#æ—¶é—´åŒæ­¥">æ—¶é—´åŒæ­¥</a></h2>
<pre><code class="language-shell"># åœ¨å„èŠ‚ç‚¹ä¸Šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤
yum install ntpdate -y
ntpdate time.windows.com
</code></pre>
<h2 id="å‘½ä»¤è¡¥å…¨--åˆ«å"><a class="header" href="#å‘½ä»¤è¡¥å…¨--åˆ«å">å‘½ä»¤è¡¥å…¨ &amp; åˆ«å</a></h2>
<blockquote>
<p>è¯¦è§ <a href="https://kubernetes.io/zh-cn/docs/tasks/tools/included/optional-kubectl-configs-bash-linux/">Linux ç³»ç»Ÿä¸­çš„ bash è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½</a>ã€‚</p>
</blockquote>
<p>å‘ <code>~/.bashrc</code> ä¸­æ·»åŠ å†…å®¹ï¼Œå¦‚æœæ²¡æœ‰bash-completionéœ€è¦å…ˆ</p>
<pre><code class="language-shell"># å®‰è£…bash-completion
apt install -y bash-completion

# åŠ è½½
cat &gt;&gt; ~/.bashrc &lt;&lt; EOF


# bash-completion
source /usr/share/bash-completion/bash_completion
# kubectl
source &lt;(kubectl completion bash)
alias kc=kubectl
complete -o default -F __start_kubectl kc
EOF

# æ›´æ–°
source .bashrc
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>+++</p>
<p>title = &quot;eBPF&quot;
description = &quot;it.os.linux.eBPF&quot;
tags = [&quot;it&quot;,&quot;os&quot;,&quot;linux&quot;]</p>
<p>+++</p>
<h1 id="ebpf"><a class="header" href="#ebpf">eBPF</a></h1>
<blockquote>
<p><a href="https://ebpf.io/">å®˜ç½‘</a>ï¼›</p>
<p><a href="https://cilium.readthedocs.io/en/stable/bpf/">eBPF å’Œ XDP å‚è€ƒæŒ‡å—</a> &amp; <a href="https://arthurchiao.art/blog/cilium-bpf-xdp-reference-guide-zh/">ç¿»è¯‘</a>ï¼›</p>
<p><a href="https://man7.org/linux/man-pages/man7/bpf-helpers.7.html">bpf-helpers</a>ï¼›</p>
<p><a href="https://arthurchiao.art/blog/bpf-advanced-notes-1-zh/">BPF ç¨‹åºç±»å‹è¯¦è§£</a>ï¼›</p>
<p><a href="https://arthurchiao.art/blog/bpf-advanced-notes-2-zh/">BPF Map ç±»å‹è¯¦è§£</a>ï¼›</p>
<p><a href="%E8%AE%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/iovisor/bcc">iovisor/bcc</a>ï¼›</p>
<p>ä½¿ç”¨ python å¼€å‘ eBPF ç¨‹åºï¼›</p>
<p><a href="%E8%AE%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/cilium/ebpf">cilium/ebpf</a>ï¼›</p>
<p><a href="https://github.com/iovisor/gobpf">iovisor/gobpf</a>ï¼›</p>
<p><a href="https://www.sobyte.net/post/2022-04/go-ebfp/">ä½¿ç”¨ Go è¯­è¨€å¼€å‘ eBPF ç¨‹åº</a>ï¼›</p>
</blockquote>
<h2 id="ç®€ä»‹"><a class="header" href="#ç®€ä»‹">ç®€ä»‹</a></h2>
<blockquote>
<p><a href="https://ebpf.io/what-is-ebpf#introduction-to-ebpf">eBPFç®€ä»‹</a>ï¼›</p>
</blockquote>
<p><img src="https://ebpf.io/static/go-1a1bb6f1e64b1ad5597f57dc17cf1350.png" alt="" /></p>
<h2 id="è¿‡ç¨‹"><a class="header" href="#è¿‡ç¨‹">è¿‡ç¨‹</a></h2>
<p><img src="%E8%AE%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/./img/Linux.eBPF.%E8%BF%87%E7%A8%8B.svg" alt="" /></p>
<h2 id="æŠ€æœ¯æ ˆ"><a class="header" href="#æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</a></h2>
<blockquote>
<p><a href="http://arthurchiao.art/blog/bpf-portability-and-co-re-zh/">[è¯‘] BPF å¯ç§»æ¤æ€§å’Œ CO-RE (compile once - run everywhere)</a>ï¼›<a href="https://facebookmicrosites.github.io/bpf/blog/2020/02/19/bpf-portability-and-co-re.html">BPF Portability and CO-RE</a>ï¼›</p>
</blockquote>
<p><img src="%E8%AE%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/./img/Linux.eBPF.%E6%8A%80%E6%9C%AF%E6%A0%88.svg" alt="" /></p>
<h2 id="co-re"><a class="header" href="#co-re">CO-RE</a></h2>
<h3 id="btf"><a class="header" href="#btf">BTF</a></h3>
<p>æ£€æŸ¥BTFå¼€å¯</p>
<pre><code class="language-shell">$ cat /boot/config-`uname -r` | grep BTF
CONFIG_VIDEO_SONY_BTF_MPX=m
CONFIG_DEBUG_INFO_BTF=y
CONFIG_PAHOLE_HAS_SPLIT_BTF=y
CONFIG_DEBUG_INFO_BTF_MODULES=y
</code></pre>
<h3 id="vmlinuxh"><a class="header" href="#vmlinuxh">vmlinux.h</a></h3>
<pre><code class="language-shell"># ç”Ÿæˆvmlinux.h
$ bpftool btf dump file /sys/kernel/btf/vmlinux format c &gt; vmlinux.h
</code></pre>
<h2 id="bpf-prog"><a class="header" href="#bpf-prog">BPF prog</a></h2>
<pre><code class="language-c">#include &quot;vmlinux.h&quot;

#include &lt;bpf/bpf_helpers.h&gt;
#include &lt;bpf/bpf_tracing.h&gt;

SEC(&quot;&lt;bpf_type&gt;/&lt;trace_name&gt;&quot;)
int kprobe__do_sys_openat2(struct pt_regs *ctx)
{
    char file_name[256];
    bpf_probe_read(file_name, sizeof(file_name), PT_REGS_PARM2(ctx));

    char fmt[] = &quot;open file %s\n&quot;;
    bpf_trace_printk(fmt, sizeof(fmt), &amp;file_name);

    return 0;
}
</code></pre>
<p>vmlinux.hï¼šè§CO-RE vmlinux.h</p>
<p>bpf_typeï¼šä¸åŒçš„ç±»å‹æœ‰ä¸åŒçš„ä½¿ç”¨æ–¹å¼å’Œé™åˆ¶ï¼Œè¯¦è§ä¸‹é¢<a href="%E8%AE%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux.eBPF.html#eBPF%E7%B1%BB%E5%9E%8B">eBPFç±»å‹</a>ã€‚</p>
<p>trace_nameï¼šå¯¹äº</p>
<h3 id="ç¼–è¯‘"><a class="header" href="#ç¼–è¯‘">ç¼–è¯‘</a></h3>
<pre><code class="language-makefile"></code></pre>
<h3 id="ç±»å‹"><a class="header" href="#ç±»å‹">ç±»å‹</a></h3>
<h3 id="kprobes"><a class="header" href="#kprobes">kprobes</a></h3>
<pre><code class="language-c">#include &quot;vmlinux.h&quot;

#include &lt;bpf/bpf_helpers.h&gt;
#include &lt;bpf/bpf_tracing.h&gt;

SEC(&quot;kprobe/do_sys_openat2&quot;)
int kprobe__do_sys_openat2(struct pt_regs *ctx)
{
    char file_name[256];
    bpf_probe_read(file_name, sizeof(file_name), PT_REGS_PARM2(ctx));

    char fmt[] = &quot;open file %s\n&quot;;
    bpf_trace_printk(fmt, sizeof(fmt), &amp;file_name);

    return 0;
}
</code></pre>
<h3 id="tracepoint"><a class="header" href="#tracepoint">tracepoint</a></h3>
<h3 id="raw_tracepoint"><a class="header" href="#raw_tracepoint">raw_tracepoint</a></h3>
<h2 id="bpf-map"><a class="header" href="#bpf-map">BPF map</a></h2>
<h2 id="vmlinux"><a class="header" href="#vmlinux">vmlinux</a></h2>
<h2 id="libbpfgo"><a class="header" href="#libbpfgo">libbpfgo</a></h2>
<blockquote>
<p><a href="https://github.com/aquasecurity/libbpfgo">aquasecurity/libbpfgo</a>ï¼šä¸€ä¸ªé€šè¿‡cgoè°ƒç”¨libbpfåº“çš„goè¯­è¨€å°è£…ã€‚</p>
<p><a href="https://mozillazg.com/2022/05/ebpf-libbpfgo-develop-env-and-hello-world.html">libbpfgo ä½¿ç”¨ç¤ºä¾‹ï¼šæ­å»ºå¼€å‘ç¯å¢ƒä»¥åŠç¼–å†™ç¬¬ä¸€ä¸ª ebpf ç¨‹åº</a>ï¼›</p>
<p><a href="https://libbpf.readthedocs.io/en/latest/program_types.html">æ–‡æ¡£</a>ï¼›</p>
</blockquote>
<h3 id="ä¾èµ–"><a class="header" href="#ä¾èµ–">ä¾èµ–</a></h3>
<pre><code class="language-shell"># å®‰è£…ï¼šclang llvm elf bpftool
$ apt install -y clang llvm libelf-dev linux-tools-common
# æ‰§è¡Œï¼šä»æ”¶åˆ°ä»¥ä¸‹æç¤º
$ bpftool 
WARNING: bpftool not found for kernel 5.15.0-52

  You may need to install the following packages for this specific kernel:
    linux-tools-5.15.0-52-generic
    linux-cloud-tools-5.15.0-52-generic

  You may also want to install one of the following packages to keep up to date:
    linux-tools-generic
    linux-cloud-tools-generic
# å®‰è£…
$ apt install -y linux-tools-5.15.0-52-generic
</code></pre>
<h3 id="makefile"><a class="header" href="#makefile">Makefile</a></h3>
<pre><code class="language-makefile">ROOT = ./
OUTPUT = ./build

$(OUTPUT):
	mkdir -p $(OUTPUT)

# ---------------- vmlinuxh
# vmlinuxh: vmlinux header file, generated by
# `bpftool btf dump file /sys/kernel/btf/vmlinux format c &gt; OUTPUT/vmlinux.h`
.PHONY: vmlinuxh
VMLINUXH = $(OUTPUT)/vmlinux.h
BPFTOOL = $(shell which bpftool || /bin/false)
BTFFILE = /sys/kernel/btf/vmlinux
DBGVMLINUX = /usr/lib/debug/boot/vmlinux-$(shell uname -r)

vmlinuxh: $(VMLINUXH)
$(VMLINUXH): $(OUTPUT)
ifeq ($(wildcard $(BPFTOOL)),)
	@echo &quot;ERROR: could not find bpftool&quot;
	@exit 1
endif
	@if [ -f $(DBGVMLINUX) ]; then \
		echo &quot;INFO: found dbg kernel, generating $(VMLINUXH) from $(DBGVMLINUX)&quot;; \
		$(BPFTOOL) btf dump file $(DBGVMLINUX) format c &gt; $(VMLINUXH); \
	fi
	@if [ ! -f $(BTFFILE) ] &amp;&amp; [ ! -f $(DBGVMLINUX) ]; then \
		echo &quot;ERROR: kernel does not seem to support BTF&quot;; \
		exit 1; \
	fi
	@if [ ! -f $(VMLINUXH) ]; then \
		echo &quot;INFO: generating $(VMLINUXH) from $(BTFFILE)&quot;; \
		$(BPFTOOL) btf dump file $(BTFFILE) format c &gt; $(VMLINUXH); \
	fi

# ---------------- c
# C
CC = gcc
CFLAGS = -ggdb -gdwarf -O2 -Wall -fpie -Wno-unused-variable -Wno-unused-function

# ---------------- libbpf
# libbpf: default static libbpf
LIBBPF_SRC = $(abspath ./3rdparty/libbpf/src)
LIBBPF_DST = $(abspath $(OUTPUT)/libbpf)
GIT = $(shell which git || /bin/false)

$(LIBBPF_SRC):
ifeq ($(wildcard $@), )
	echo &quot;INFO: updating submodule 'libbpf'&quot;
	$(GIT) submodule update --init --recursive
endif
$(LIBBPF_DST):
	mkdir -p $(LIBBPF_DST)

.PHONY: libbpf
libbpf: libbpf-static

# ---------------- ---------------- libbpf static
# libbpf static: static libbpf generation for the git submodule
LIBBPF_DESTDIR = $(abspath $(OUTPUT))
LIBBPF_OBJDIR = $(abspath $(OUTPUT)/libbpf)
LIBBPF_OBJ = $(abspath $(LIBBPF_OBJDIR)/libbpf.a)
LDFLAGS =

.PHONY: libbpf-static
libbpf-static: $(LIBBPF_OBJ)
$(LIBBPF_OBJ): $(LIBBPF_SRC) $(wildcard $(LIBBPF_SRC)/*.[ch]) | $(LIBBPF_DST)
	CC=&quot;$(CC)&quot; CFLAGS=&quot;$(CFLAGS)&quot; LD_FLAGS=&quot;$(LDFLAGS)&quot; \
	$(MAKE) -C $(LIBBPF_SRC) \
		BUILD_STATIC_ONLY=1 \
		DESTDIR=$(LIBBPF_DESTDIR) \
		OBJDIR=$(LIBBPF_OBJDIR) \
		INCLUDEDIR= LIBDIR= UAPIDIR= prefix= libdir= \
		install

# ---------------- ---------------- libbpf dynamic
# libbpf dynamic:
CGO_CFGLAGS_DYN = &quot;-I. -I/usr/include/&quot;
CGO_LDFLAGS_DYN = &quot;-lelf -lz -lbpf&quot;
CGO_EXTLDFLAGS_DYN = '-w'

.PHONY: libbpf-dynamic
libbpf-dynamic:
	echo nothing

# ---------------- program
PROGRAM = ytrace

# ---------------- bpf program
# bpf prog: clang -O2 -Wall -target bpf
CLANG = clang
BPF_SRC = $(abspath $(ROOT)/pkg/bpf)
BPF_CFLAGS_STATIC = &quot;-I$(abspath $(OUTPUT))&quot;
BPF_LDFLAGS_STATIC = &quot;-lelf -lz $(LIBBPF_OBJ)&quot;

.PHONY: $(PROGRAM).bpf.c
$(PROGRAM).bpf.o: $(PROGRAM).bpf.c | vmlinuxh
	$(CLANG) -D__TARGET_ARCH_x86 \
		$(CFLAGS) -target bpf -I. -I$(OUTPUT) \
		-c $&lt; -o $@

# ---------------- go program
# go prog
OS := $(shell uname -s)
ARCH := $(shell uname -m)
ARCH := $(subst x86_64,amd64,$(ARCH))
GOARCH := $(ARCH)
CGO_CFLAGS_STATIC = &quot;-I$(abspath $(OUTPUT))&quot;
CGO_LDFLAGS_STATIC = &quot;-lelf -lz $(LIBBPF_OBJ)&quot;
CGO_EXTLDFLAGS_STATIC = '-w -extldflags &quot;-static&quot;'

.PHONY: $(PROGRAM)
$(PROGRAM): libbpf | $(PROGRAM).bpf.o
	CC=$(CLANG) GOOS=linux GOARCH=$(GOARCH) \
	CGO_CFLAGS=$(CGO_CFLAGS_STATIC) CGO_LDFLAGS=$(CGO_LDFLAGS_STATIC) \
	go build -tags netgo -ldflags $(CGO_EXTLDFLAGS_STATIC) \
		-o $(PROGRAM) ./$(PROGRAM).go

# ---------------- all
all:
	$(MAKE) -C . $(PROGRAM)

# ---------------- clean
clean:
	$(MAKE) -C $(LIBBPF_SRC) clean
	rm -rf $(OUTPUT)
	rm -rf $(VMLINUXH)
	rm -rf $(PROGRAM) $(PROGRAM)-*static $(PROGRAM)-*dynamic
	rm -rf $(PROGRAM).bpf.o $(PROGRAM).o

</code></pre>
<p>ebpf/c/</p>
<pre><code class="language-c">#include &quot;vmlinux.h&quot;

#include &lt;bpf/bpf_helpers.h&gt;
#include &lt;bpf/bpf_tracing.h&gt;

SEC(&quot;kprobe/do_sys_openat2&quot;)
int kprobe__do_sys_openat2(struct pt_regs *ctx)
{
    char file_name[256];
    bpf_probe_read(file_name, sizeof(file_name), PT_REGS_PARM2(ctx));

    char fmt[] = &quot;open file %s\n&quot;;
    bpf_trace_printk(fmt, sizeof(fmt), &amp;file_name);

    return 0;
}
</code></pre>
<pre><code class="language-shell">clang -D__TARGET_ARCH_x86 -I. -I../c/  -target bpf -c bpf.o.c -o bpf.o
</code></pre>
<h2 id="å®éªŒåŸºäº-ebpf-çš„ç½‘ç»œè§‚æµ‹"><a class="header" href="#å®éªŒåŸºäº-ebpf-çš„ç½‘ç»œè§‚æµ‹">å®éªŒï¼šåŸºäº eBPF çš„ç½‘ç»œè§‚æµ‹</a></h2>
<blockquote>
<p><a href="https://blog.csdn.net/flynetcn/article/details/119487894">Linuxç½‘ç»œæ–°æŠ€æœ¯åŸºçŸ³ï¼šeBPF and XDP</a>ï¼›</p>
</blockquote>
<h2 id="traceeäºŒæ¬¡å¼€å‘"><a class="header" href="#traceeäºŒæ¬¡å¼€å‘">traceeäºŒæ¬¡å¼€å‘</a></h2>
<blockquote>
<p><a href="https://github.com/aquasecurity/tracee">aquasecurity/tracee</a>ï¼šä½¿ç”¨ Linux <strong>eBPF æŠ€æœ¯</strong>åœ¨è¿è¡Œæ—¶<strong>è·Ÿè¸ªæ‚¨çš„ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºï¼Œå¹¶åˆ†ææ”¶é›†çš„äº‹ä»¶ä»¥æ£€æµ‹</strong>å¯ç–‘çš„è¡Œä¸ºæ¨¡å¼ã€‚</p>
<p>tracee ä¾èµ–äº libbpf</p>
</blockquote>
<h3 id="libbpf"><a class="header" href="#libbpf">libbpf</a></h3>
<blockquote>
<p><a href="https://github.com/libbpf/libbpf">libbpf</a>ï¼šå¯ä»¥æ„å»ºæ”¯æŒ <a href="https://github.com/libbpf/libbpf#bpflibbpf-usage-and-questions">BPF CO-RE(Compile Once â€“ Run Everywhere)</a> çš„é«˜å¯ç§»æ¤æ€§ BPF ç¨‹åºã€‚ä¸ <a href="https://github.com/iovisor/bcc/">BCC</a> ç›¸æ¯”ï¼Œå®ƒä¸éœ€è¦å°† Clang/LLVM è¿è¡Œæ—¶éƒ¨ç½²åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä¸ä¾èµ–äºå¯ç”¨çš„å†…æ ¸å¼€å‘å¤´æ–‡ä»¶ã€‚</p>
<p>BTFï¼šlibbpf ä¾èµ–äºå†…æ ¸ BTFï¼ŒRHEL 8.2+ã€Ubuntu 20.10 ç­‰å‘è¡Œç‰ˆéƒ½å·²ç»å†…ç½®å†…æ ¸ BTFï¼›å†…æ ¸ BTF éœ€è¦åœ¨<strong>ç¼–è¯‘</strong>å†…æ ¸æ—¶è®¾ç½®<code>CONFIG_DEBUG_INFO_BTF=y</code>æ„å»ºé€‰é¡¹ï¼›é€šè¿‡æŸ¥çœ‹æ˜¯å¦å­˜åœ¨æ–‡ä»¶<code>/sys/kernel/btf/vmlinux</code>ä»¥æ£€æŸ¥å†…æ ¸æ˜¯å¦å†…ç½® BTF</p>
</blockquote>
<p>å®‰è£…</p>
<pre><code class="language-shell"># 

# libbpf åœ¨ tracee é¡¹ç›® make ä¸­çš„å®‰è£…æ–¹å¼
CC=&quot;clang&quot; \
CFLAGS=&quot;&quot;-fPIC&quot;&quot; \
LD_FLAGS=&quot;&quot; \
make \
-C ./3rdparty/libbpf/src \
BUILD_STATIC_ONLY=1 \
DESTDIR=/root/projects/github.com/tracee/dist/libbpf \
OBJDIR=/root/projects/github.com/tracee/dist/libbpf/obj \
INCLUDEDIR= LIBDIR= UAPIDIR= prefix= libdir= \
install install_uapi_headers
</code></pre>
<h3 id="å¯åŠ¨æµç¨‹"><a class="header" href="#å¯åŠ¨æµç¨‹">å¯åŠ¨æµç¨‹</a></h3>
<h3 id="è¿½è¸ªæµç¨‹"><a class="header" href="#è¿½è¸ªæµç¨‹">è¿½è¸ªæµç¨‹</a></h3>
<h3 id="å®ç°æ–°çš„è¿½è¸ª"><a class="header" href="#å®ç°æ–°çš„è¿½è¸ª">å®ç°æ–°çš„è¿½è¸ª</a></h3>
<p>tracee å®ç°äº† vfs_write è¿½è¸ªä½†å¹¶æ²¡æœ‰å®ç° vfs_read è¿½è¸ªï¼Œè¿™é‡Œå‚è€ƒ vfs_write è¿½è¸ª<strong>å®ç° vfs_read è¿½è¸ª</strong>ã€‚å¾—ç›Šäº tracee çš„ä»£ç å¯æ‰©å±•æ€§ï¼Œåªéœ€è¦å¦‚ä¸‹ä¸¤æ­¥ï¼š</p>
<ol>
<li>åœ¨ go ä»£ç ä¸­æ·»åŠ  vfs_read äº‹ä»¶å®šä¹‰</li>
</ol>
<pre><code class="language-go">// pkg/events/events.go

const (
	VfsRead  // æ·»åŠ  vfs_read äº‹ä»¶ID
    VfsWrite
)

var Definitions = eventDefinitions{
	events: map[ID]Event{
        // å‚è€ƒ VfsWrite å®šä¹‰å®ç° VfsRead å®šä¹‰
        VfsRead: {
			ID32Bit: sys32undefined,
			Name:    &quot;vfs_read&quot;,
			Probes: []probeDependency{
				{Handle: probes.VfsRead, Required: true},
				{Handle: probes.VfsReadRet, Required: true},
			},
			Sets: []string{},
			Params: []trace.ArgMeta{
				{Type: &quot;const char*&quot;, Name: &quot;pathname&quot;},
				{Type: &quot;dev_t&quot;, Name: &quot;dev&quot;},
				{Type: &quot;unsigned long&quot;, Name: &quot;inode&quot;},
				{Type: &quot;size_t&quot;, Name: &quot;count&quot;},
				{Type: &quot;off_t&quot;, Name: &quot;pos&quot;},
				{Type: &quot;unsigned int&quot;, Name: &quot;flags&quot;}, // é¡ºæ‰‹æ·»åŠ ä¸€ä¸ª flags
			},
		},
        VfsWrite: { /*...*/ },
    }
}
</code></pre>
<pre><code class="language-go">// pkg/ebpf/probes/probes.go

const (
	VfsRead    // æ·»åŠ å…¥å‚å¤„ç†æ ‡è¯†
    VfsReadRet // æ·»åŠ å‡ºå‚å¤„ç†æ ‡è¯†
	VfsWrite
	VfsWriteRet
)

// Init initializes a Probes interface
func Init(module *bpf.Module, netEnabled bool) (Probes, error) {
	allProbes := map[Handle]Probe{
		VfsRead:                   &amp;traceProbe{eventName: &quot;vfs_read&quot;, probeType: kprobe, programName: &quot;trace_vfs_read&quot;},        // æ³¨å†Œå…¥å‚æ¢é’ˆ
		VfsReadRet:                &amp;traceProbe{eventName: &quot;vfs_read&quot;, probeType: kretprobe, programName: &quot;trace_ret_vfs_read&quot;}, // æ³¨å†Œå‡ºå‚æ¢é’ˆ
		VfsWrite:                   &amp;traceProbe{eventName: &quot;vfs_write&quot;, probeType: kprobe, programName: &quot;trace_vfs_write&quot;},
		VfsWriteRet:                &amp;traceProbe{eventName: &quot;vfs_write&quot;, probeType: kretprobe, programName: &quot;trace_ret_vfs_write&quot;},
    }
}
</code></pre>
<ol start="2">
<li>ç¼–å†™ bpf ä»£ç </li>
</ol>
<pre><code class="language-c">// pkg/ebpf/c/tracee.bpf.c

enum tail_call_id_e // åŸæœ‰å†…å®¹
{
    TAIL_VFS_READ,
    TAIL_VFS_WRITE, // åŸæœ‰å†…å®¹
}

enum event_id_e // åŸæœ‰å†…å®¹
{
    VFS_READ,
    VFS_WRITE, // åŸæœ‰å†…å®¹
}

// å‚è€ƒæ–¹æ³• get_inode_nr_from_fileï¼Œé€šè¿‡å® READ_KERN è·å–ï¼Œå¦åˆ™å°†æŠ¥é”™å¯„å­˜å™¨å†…å­˜æœªåˆå§‹åŒ–
static __always_inline unsigned int get_flags_from_file(struct file *file)
{
    return READ_KERN(file-&gt;f_flags);
}

static __always_inline int
do_file_read_operation(struct pt_regs *ctx, u32 event_id, u32 tail_call_id)
{
    args_t saved_args;
    if (load_args(&amp;saved_args, event_id) != 0) {
        // missed entry or not traced
        return 0;
    }

    int zero = 0;
    config_entry_t *config = bpf_map_lookup_elem(&amp;config_map, &amp;zero);
    if (config == NULL)
        return 0;

    if (!should_submit(VFS_READ, config)) {
        bpf_tail_call(ctx, &amp;prog_array, tail_call_id);
        return 0;
    }

    loff_t start_pos;
    void *ptr;
    struct iovec *vec;
    size_t count;

    struct file *file = (struct file *) saved_args.args[0];
    void *file_path = get_path_str(GET_FIELD_ADDR(file-&gt;f_path));
    unsigned int flags = get_flags_from_file(file); // é¡ºæ‰‹åŠ ä¸ª flags

    ptr = (void *) saved_args.args[1];
    count = (size_t) saved_args.args[2];
    loff_t *pos = (loff_t *) saved_args.args[3];

    // Extract device id, inode number, and pos (offset)
    dev_t s_dev = get_dev_from_file(file);
    unsigned long inode_nr = get_inode_nr_from_file(file);
    bpf_probe_read(&amp;start_pos, sizeof(off_t), pos);

    bool char_dev = (start_pos == 0);
    u32 bytes_read = PT_REGS_RC(ctx);

    // Calculate read start offset
    if (start_pos != 0)
        start_pos -= bytes_read;

    event_data_t data = {};
    if (!init_event_data(&amp;data, ctx))
        return 0;

    if (should_submit(VFS_READ, data.config)) {
        save_str_to_buf(&amp;data, file_path, 0);
        save_to_submit_buf(&amp;data, &amp;s_dev, sizeof(dev_t), 1);
        save_to_submit_buf(&amp;data, &amp;inode_nr, sizeof(unsigned long), 2);
        save_to_submit_buf(&amp;data, &amp;count, sizeof(size_t), 3);
        save_to_submit_buf(&amp;data, &amp;start_pos, sizeof(off_t), 4);
        save_to_submit_buf(&amp;data, &amp;flags, sizeof(int), 5); // flags

        // Submit vfs_read(v) event
        events_perf_submit(&amp;data, event_id, PT_REGS_RC(ctx));
    }

    bpf_tail_call(ctx, &amp;prog_array, tail_call_id);
    return 0;
}

SEC(&quot;kprobe/vfs_read&quot;)
TRACE_ENT_FUNC(vfs_read, VFS_READ);

SEC(&quot;kretprobe/vfs_read&quot;)
int BPF_KPROBE(trace_ret_vfs_read)
{
    return do_file_read_operation(ctx, VFS_READ, TAIL_VFS_READ);
}
</code></pre>
<p>é‡æ–°ç¼–è¯‘å¹¶æ‰§è¡Œ</p>
<pre><code class="language-shell">$ make
make ./dist/tracee.bpf
clang \
	-D__TARGET_ARCH_x86 \
	-D__BPF_TRACING__ \
	-DCORE \
	-I./pkg/ebpf/c/ \
	-I./dist/tracee.bpf \
	-target bpf \
	-O2 -g \
	-march=bpf -mcpu=v2 \
	-c ./pkg/ebpf/c/tracee.bpf.c \
	-o dist/tracee.bpf.core.o
make ./dist/btfhub
make btfhub
GOOS=linux CC=clang GOARCH=amd64 CGO_CFLAGS=&quot;-I/root/projects/github.com/tracee/dist/libbpf&quot; CGO_LDFLAGS=&quot;-lelf  -lz  /root/projects/github.com/tracee/dist/libbpf/libbpf.a&quot; go build \
	-tags core,ebpf \
	-ldflags=&quot;-w \
		-extldflags \&quot;\&quot; \
		-X main.version=\&quot;v0.8.0\&quot; \
		&quot; \
	-v -o dist/tracee-ebpf \
	./cmd/tracee-ebpf
make[1]: â€œdist/btfhubâ€å·²æ˜¯æœ€æ–°ã€‚
make[1]: å¯¹â€œbtfhubâ€æ— éœ€åšä»»ä½•äº‹ã€‚
github.com/aquasecurity/tracee
github.com/aquasecurity/tracee/pkg/events
github.com/aquasecurity/tracee/pkg/events/derive
github.com/aquasecurity/tracee/pkg/bufferdecoder
github.com/aquasecurity/tracee/pkg/ebpf
github.com/aquasecurity/tracee/cmd/tracee-ebpf/internal/flags
github.com/aquasecurity/tracee/cmd/tracee-ebpf

$ ./dist/tracee-ebpf --trace event=vfs_read
TIME             UID    COMM             PID     TID     RET              EVENT                ARGS
22:14:26:651850  0      kubelet          17433   17433   549              vfs_read             pathname: /etc/selinux/config, dev: 265289728, inode: 51223044, count: 4096, pos: 0, flags: 32768
...
</code></pre>
<h3 id="å®¹å™¨è¿è¡Œ"><a class="header" href="#å®¹å™¨è¿è¡Œ">å®¹å™¨è¿è¡Œ</a></h3>
<p>builder ç›®å½•ä¸­æä¾›äº†ä¸€äº› Makefile &amp; Dockerfile</p>
<h3 id="è‡ªå®šä¹‰å®¹å™¨è¿è¡Œ"><a class="header" href="#è‡ªå®šä¹‰å®¹å™¨è¿è¡Œ">è‡ªå®šä¹‰å®¹å™¨è¿è¡Œ</a></h3>
<p>tracee æä¾›çš„ Makefile &amp; Dockerfile ä¸­åšäº†å¾ˆå¤šäº‹æƒ…ï¼ŒåŒ…æ‹¬åœ¨å®¹å™¨ä¸­ä¸‹è½½ä¸€äº›ç¼–è¯‘æ‰§è¡Œä¾èµ–ã€‚ä½†æˆ‘æ›´æƒ³è®© tracee-ebpf å¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°æˆ‘è‡ªå·±è‡ªå®šä¹‰çš„å®¹å™¨ä¸­ç›´æ¥è¿è¡Œ</p>
<ol>
<li>ç¼–å†™ makefile.minimal</li>
</ol>
<pre><code class="language-makefile">.PHONY: build-binary build-container run-container clean

build-binary:
	GOOS=linux CC=clang GOARCH=amd64 CGO_CFLAGS=&quot;-I/root/projects/github.com/tracee/dist/libbpf&quot; CGO_LDFLAGS=&quot;-lelf  -lz  /root/projects/github.com/tracee/dist/libbpf/libbpf.a&quot; go build \
    	-tags core,ebpf \
    	-ldflags=&quot;-w \
    		-extldflags \&quot;\&quot; \
    		-X main.version=\&quot;v0.8.0\&quot; \
    		&quot; \
    	-v -o bin/tracee-ebpf \
    	./cmd/tracee-ebpf

build-container: build-binary
	docker build -f Dockerfile.minimal -t tracee-minimal:0.1 .

run-container: build-container
	docker run -it --name tracee-minimal tracee-minimal:0.1

clean:
	docker rm tracee-minimal
	docker rmi tracee-minimal:0.1
</code></pre>
<ol start="2">
<li>ç¼–å†™ dockerfile.minimal</li>
</ol>
<pre><code class="language-dockerfile">FROM alpine:3.15

# å› ä¸º bpf ç¨‹åºä¾èµ–äºä¸€äº› so åº“ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦ä¸€ä¸€æ‹·è´
COPY /usr/lib64/libelf.so.1 /lib64/libelf.so.1

COPY bin/tracee-ebpf /tracee/tracee-ebpf

ENTRYPOINT [&quot;sh&quot;,&quot;-c&quot;,&quot;/tracee/tracee-ebpf --trace container --trace event=vfs_write --trace event=vfs_read&quot;]
</code></pre>
<p>æµ‹è¯•è¿è¡Œ</p>
<pre><code class="language-shell">$ make -f Makefile.minimal run-container
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
